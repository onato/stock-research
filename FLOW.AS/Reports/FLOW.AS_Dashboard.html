<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flow Traders (FLOW.AS) Financial Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #00d4aa, #00b894);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .header p {
            color: #888;
            font-size: 1.1rem;
        }
        .header .subtitle {
            color: #00d4aa;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* Investment Overview Section */
        .overview-section {
            max-width: 1400px;
            margin: 0 auto 30px;
        }
        .overview-toggle {
            width: 100%;
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid rgba(0, 212, 170, 0.3);
            border-radius: 12px;
            padding: 16px 24px;
            color: #00d4aa;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }
        .overview-toggle:hover {
            background: rgba(0, 212, 170, 0.2);
        }
        .overview-toggle .arrow {
            transition: transform 0.3s ease;
        }
        .overview-toggle.active .arrow {
            transform: rotate(180deg);
        }
        .overview-content {
            display: none;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: none;
            border-radius: 0 0 12px 12px;
            padding: 30px;
            margin-top: -12px;
        }
        .overview-content.active {
            display: block;
        }
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }
        .overview-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .overview-card h3 {
            color: #00d4aa;
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .overview-card p {
            margin-bottom: 12px;
            line-height: 1.6;
        }
        .overview-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .overview-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            line-height: 1.5;
        }
        .overview-card li:last-child {
            border-bottom: none;
        }
        .overview-card.bull h3 { color: #00d4aa; }
        .overview-card.bear h3 { color: #ff6b6b; }
        .overview-card.risks h3 { color: #fdcb6e; }
        .risk-high { color: #ff6b6b; font-weight: 500; }
        .risk-moderate { color: #fdcb6e; font-weight: 500; }
        .risk-low { color: #00d4aa; font-weight: 500; }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }
        .kpi-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 170, 0.2);
        }
        .kpi-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00d4aa;
            margin-bottom: 5px;
        }
        .kpi-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .kpi-change {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .kpi-change.positive { color: #00d4aa; }
        .kpi-change.negative { color: #ff6b6b; }

        /* Guidance Section */
        .guidance-section {
            max-width: 1400px;
            margin: 0 auto 30px;
        }
        .guidance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .guidance-header h3 {
            color: #fff;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .guidance-header h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #00d4aa, #00b894);
            border-radius: 2px;
        }
        .guidance-meta {
            font-size: 0.85rem;
            color: #888;
        }
        .guidance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .guidance-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 18px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.2s ease;
        }
        .guidance-card:hover {
            transform: translateY(-2px);
        }
        .guidance-metric {
            font-size: 0.8rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        .guidance-target {
            font-size: 1.4rem;
            font-weight: 600;
            color: #00d4aa;
            margin-bottom: 6px;
        }
        .guidance-period {
            font-size: 0.85rem;
            color: #e0e0e0;
            margin-bottom: 8px;
        }
        .guidance-vs-prior {
            display: inline-block;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 500;
        }
        .guidance-vs-prior.raised {
            background: rgba(0, 212, 170, 0.15);
            color: #00d4aa;
        }
        .guidance-vs-prior.lowered {
            background: rgba(255, 107, 107, 0.15);
            color: #ff6b6b;
        }
        .guidance-vs-prior.maintained {
            background: rgba(255, 255, 255, 0.1);
            color: #888;
        }
        .guidance-vs-prior.new {
            background: rgba(99, 102, 241, 0.15);
            color: #818cf8;
        }
        .guidance-notes {
            font-size: 0.8rem;
            color: #666;
            margin-top: 8px;
            line-height: 1.4;
        }
        .guidance-commentary {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            padding: 16px 20px;
            border-left: 3px solid #00d4aa;
            font-style: italic;
            color: #b0b0b0;
            line-height: 1.6;
        }
        .guidance-commentary::before {
            content: '"';
            font-size: 1.5rem;
            color: #00d4aa;
            margin-right: 4px;
        }

        /* Section Titles */
        .section-title {
            font-size: 1.5rem;
            color: #fff;
            margin: 40px auto 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 212, 170, 0.3);
            max-width: 1400px;
        }

        /* Charts */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .chart-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .chart-header h3 {
            color: #fff;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .chart-header h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #00d4aa, #00b894);
            border-radius: 2px;
        }
        .help-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(0, 212, 170, 0.2);
            border: 1px solid #00d4aa;
            color: #00d4aa;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        .help-btn:hover {
            background: #00d4aa;
            color: #1a1a2e;
        }
        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: linear-gradient(135deg, #1e2a4a 0%, #16213e 100%);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(0, 212, 170, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-header h3 {
            color: #00d4aa;
            font-size: 1.4rem;
            margin: 0;
        }
        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            background: #ff6b6b;
            color: #fff;
        }
        .modal-body {
            padding: 25px;
            line-height: 1.7;
        }
        .modal-body p { margin-bottom: 15px; }
        .modal-body strong { color: #00d4aa; }
        .modal-body ul { margin: 15px 0; padding-left: 20px; }
        .modal-body li { margin-bottom: 8px; }
        .metric-highlight {
            background: rgba(0, 212, 170, 0.1);
            border-left: 3px solid #00d4aa;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        /* DCF Valuation Section */
        .dcf-section {
            max-width: 1400px;
            margin: 0 auto 40px;
        }
        .dcf-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .dcf-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }
        .dcf-card:hover {
            transform: translateY(-3px);
        }
        .dcf-card.highlight {
            background: rgba(0, 212, 170, 0.1);
            border-color: rgba(0, 212, 170, 0.3);
        }
        .dcf-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        .dcf-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #00d4aa;
        }
        .dcf-card:not(.highlight) .dcf-value {
            color: #fff;
        }
        .dcf-change {
            font-size: 1rem;
            margin-top: 8px;
            font-weight: 600;
        }
        .dcf-change.positive { color: #00d4aa; }
        .dcf-change.negative { color: #ff6b6b; }
        .dcf-sublabel {
            font-size: 0.8rem;
            color: #666;
            margin-top: 8px;
        }
        .dcf-warning {
            background: rgba(253, 203, 110, 0.15);
            border: 1px solid rgba(253, 203, 110, 0.4);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fdcb6e;
        }
        .warning-icon {
            font-size: 1.2rem;
        }
        .dcf-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .slider-group label {
            font-size: 0.95rem;
            color: #e0e0e0;
            display: flex;
            justify-content: space-between;
        }
        .slider-group label span {
            color: #00d4aa;
            font-weight: 600;
        }
        .slider-group input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
        }
        .slider-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #00d4aa;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .slider-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        .slider-group input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #00d4aa;
            cursor: pointer;
            border: none;
        }
        .slider-hint {
            font-size: 0.8rem;
            color: #666;
        }
        .scenario-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .scenario-tab {
            padding: 10px 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: transparent;
            color: #888;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        .scenario-tab:hover {
            border-color: rgba(0, 212, 170, 0.5);
            color: #e0e0e0;
        }
        .scenario-tab.active {
            background: rgba(0, 212, 170, 0.15);
            border-color: #00d4aa;
            color: #00d4aa;
        }
        .scenario-details {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .scenario-details h4 {
            color: #00d4aa;
            margin-bottom: 15px;
        }
        .assumption-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .assumption-item {
            text-align: center;
        }
        .assumption-item .label {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 4px;
        }
        .assumption-item .value {
            font-size: 1.1rem;
            color: #e0e0e0;
            font-weight: 500;
        }
        .sensitivity-section {
            margin-bottom: 30px;
        }
        .sensitivity-section h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        .sensitivity-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            overflow: hidden;
        }
        .sensitivity-table th,
        .sensitivity-table td {
            padding: 12px 16px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .sensitivity-table th {
            background: rgba(0, 212, 170, 0.1);
            color: #00d4aa;
            font-weight: 600;
        }
        .sensitivity-table td {
            color: #e0e0e0;
        }
        .sensitivity-table td.highlight {
            background: rgba(0, 212, 170, 0.15);
            color: #00d4aa;
            font-weight: 600;
        }
        .sensitivity-table td.below-current {
            color: #ff6b6b;
        }
        .sensitivity-table td.above-current {
            color: #00d4aa;
        }
        .historical-growth {
            margin-bottom: 30px;
        }
        .historical-growth h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        .growth-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }
        .growth-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .growth-item .metric {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 6px;
        }
        .growth-item .rate {
            font-size: 1.2rem;
            font-weight: 600;
        }
        .growth-item .rate.positive { color: #00d4aa; }
        .growth-item .rate.negative { color: #ff6b6b; }
        .growth-item.selected {
            border-color: #00d4aa;
            background: rgba(0, 212, 170, 0.1);
        }

        @media (max-width: 768px) {
            .charts-container { grid-template-columns: 1fr; }
            .overview-grid { grid-template-columns: 1fr; }
            .header h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Flow Traders Ltd. (FLOW.AS)</h1>
        <p>Global Market Maker & Liquidity Provider</p>
        <p class="subtitle">Leading European ETP Market Maker | 180+ Exchanges | 2,000+ Institutional Counterparties</p>
    </div>

    <!-- Investment Overview Section -->
    <div class="overview-section">
        <button class="overview-toggle" onclick="toggleOverview()">
            <span>Investment Overview & Analysis</span>
            <span class="arrow">▼</span>
        </button>
        <div class="overview-content" id="overviewContent">
            <div class="overview-grid">
                <div class="overview-card">
                    <h3>Company Overview</h3>
                    <p>Flow Traders is a leading global market maker and liquidity provider specializing in Exchange Traded Products (ETPs), founded in 2004 and headquartered in Amsterdam. The company operates across 180+ exchanges globally, providing continuous liquidity to over 2,000 institutional counterparties in ETPs, fixed income, commodities, FX, and digital assets. With over 40% of its 622 employees dedicated to proprietary technology development, Flow Traders combines algorithmic trading expertise with a diversified multi-asset class strategy across three main trading hubs in Amsterdam, Hong Kong, and New York.</p>
                </div>

                <div class="overview-card">
                    <h3>Business Model</h3>
                    <p><strong>Revenue from Bid-Ask Spreads:</strong> Flow Traders generates revenue through market making spreads by simultaneously quoting bid and ask prices across multiple asset classes, earning the spread between buying and selling prices while managing risk through sophisticated hedging strategies.</p>
                    <p><strong>Key Characteristic:</strong> Revenue is HIGHLY correlated with market volatility and trading volumes. The company does not take directional market views but instead profits from providing liquidity regardless of market direction.</p>
                </div>

                <div class="overview-card">
                    <h3>Competitive Position</h3>
                    <p><strong>Market Position:</strong> Leading European ETP market maker with approximately 3-5% of total European ETP market share. Estimated 10-15% market share in Europe specifically.</p>
                    <p><strong>Competitors:</strong> Virtu Financial, Citadel Securities, Optiver, IMC Trading, Jane Street, XTX Markets</p>
                    <p><strong>Moat Factors:</strong></p>
                    <ul>
                        <li>Proprietary technology platform (40%+ tech workforce)</li>
                        <li>Network effects (180+ exchanges, 2,000+ counterparties)</li>
                        <li>20+ years trading experience and risk management</li>
                        <li>First-mover in digital assets since 2017</li>
                        <li>Regulatory licenses across multiple jurisdictions</li>
                    </ul>
                </div>

                <div class="overview-card">
                    <h3>Growth Drivers</h3>
                    <ul>
                        <li><strong>ETP Market Growth:</strong> Global AuM increased 14% to $16.9T (H1 2025), record $898bn inflows</li>
                        <li><strong>Digital Assets & AllUnity:</strong> EUR stablecoin launched July 2025, tokenization megatrend ($30T by 2030)</li>
                        <li><strong>Asia Expansion:</strong> Revenue +70% YoY in 9M 2025, China ETP market growing rapidly</li>
                        <li><strong>Trading Capital Expansion:</strong> Increased 27% to €848M (Q3 2025), enables more opportunities</li>
                        <li><strong>Technology Investment:</strong> AI, ML, big data initiatives under new CTO</li>
                        <li><strong>Market Volatility:</strong> Geopolitical uncertainty sustains elevated volatility</li>
                    </ul>
                </div>

                <div class="overview-card risks">
                    <h3>Key Risks</h3>
                    <ul>
                        <li><span class="risk-high">VERY HIGH:</span> Market Volatility Dependence - Q3 2025 NTI dropped 27% as VIX fell from 23.6 to 16.0</li>
                        <li><span class="risk-high">HIGH:</span> Technology Failure or Algorithmic Errors - 24/7 trading increases operational complexity</li>
                        <li><span class="risk-moderate">MODERATE-HIGH:</span> Competitive Pressure - Virtu-Optiver alliance, well-capitalized private firms</li>
                        <li><span class="risk-moderate">MODERATE:</span> Increased Financial Leverage - $200M debt + $75M revolver, ~€12M annual interest</li>
                        <li><span class="risk-moderate">MODERATE:</span> CEO Transition - Thomas Spitz appointed Sept 2025, new growth strategy pending</li>
                        <li><span class="risk-moderate">MODERATE:</span> Digital Asset Execution - AllUnity faces USDT/USDC competition</li>
                    </ul>
                </div>

                <div class="overview-card bull">
                    <h3>Bull Case (€100.95 IV, +267% upside)</h3>
                    <ul>
                        <li>Structural ETP growth (€16.9T AuM, +14% H1 2025) with Flow Traders' leading European position</li>
                        <li>Digital asset megatrend - AllUnity stablecoin, tokenization ($30T by 2030), 24/7 trading vision</li>
                        <li>Asia growth trajectory - +70% YoY to €98M (20-25% of revenue), multi-year runway</li>
                        <li>Operating leverage - 46.7% EBITDA margin (H1 2025), 68% ROTC demonstrates efficiency</li>
                        <li>Trading Capital Expansion accelerating growth - €848M (+27% YoY) unlocks latent opportunities</li>
                        <li>Technology moat widening - 40%+ tech workforce, proprietary systems, 20+ years optimization</li>
                        <li>Undervalued at 7.5x P/E with 15-25% ROE potential and strong growth trajectory</li>
                    </ul>
                </div>

                <div class="overview-card bear">
                    <h3>Bear Case (€41.07 IV, +49% upside)</h3>
                    <ul>
                        <li>Extreme volatility dependence - FY2023 near-breakeven at low volatility, unpredictable earnings</li>
                        <li>Increased leverage + dividend suspension - €12M interest, no income for shareholders</li>
                        <li>Competition from better-capitalized firms - Citadel, Jane Street, Virtu-Optiver alliance</li>
                        <li>Technology and execution risks - algorithmic failures could be catastrophic, rapid scaling complexity</li>
                        <li>Digital asset initiatives unproven - AllUnity vs USDT/USDC, €4.6M investment losses (H1 2025)</li>
                        <li>Asia geopolitical risks - 20-25% revenue exposure to US-China tensions</li>
                        <li>CEO transition uncertainty - new "ambitious growth strategy" could involve value-destructive moves</li>
                    </ul>
                </div>

                <div class="overview-card">
                    <h3>Recent Developments</h3>
                    <ul>
                        <li><strong>Oct 2025:</strong> Q3 results - NTI €78.3M (-27% QoQ) due to lower volatility, but YTD +15% YoY</li>
                        <li><strong>Oct 2025:</strong> Secured $200M credit facility + $75M revolver for capital expansion</li>
                        <li><strong>Sept 2025:</strong> Thomas Spitz appointed CEO, bringing global markets expertise</li>
                        <li><strong>July 2025:</strong> AllUnity EUR stablecoin launched with BaFin license (EURAU)</li>
                        <li><strong>July 2025:</strong> Record H1 results - €283.6M NTI (+37% YoY), €87.5M profit (+48% YoY)</li>
                        <li><strong>Feb 2025:</strong> Record FY2024 - €467.8M NTI (+56% YoY), €159.5M profit, Asia +107%</li>
                        <li><strong>July 2024:</strong> Dividend suspension announced for Trading Capital Expansion Plan</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- KPI Cards -->
    <h2 class="section-title">Key Performance Indicators (FY2024)</h2>
    <div class="kpi-grid">
        <div class="kpi-card">
            <div class="kpi-value">€467.8M</div>
            <div class="kpi-label">Net Trading Income</div>
            <div class="kpi-change positive">+55.8% YoY</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value">45.3%</div>
            <div class="kpi-label">EBITDA Margin</div>
            <div class="kpi-change positive">+97% YoY (abs. margin)</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value">€159.5M</div>
            <div class="kpi-label">Net Profit</div>
            <div class="kpi-change positive">+340.6% YoY</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value">€3.69</div>
            <div class="kpi-label">EPS (Basic)</div>
            <div class="kpi-change positive">+339.3% YoY</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value">€766.6M</div>
            <div class="kpi-label">Shareholders' Equity</div>
            <div class="kpi-change positive">+30.9% YoY</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value">€775.0M</div>
            <div class="kpi-label">Trading Capital</div>
            <div class="kpi-change positive">+32.8% YoY</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value">~68%</div>
            <div class="kpi-label">Return on Trading Capital</div>
            <div class="kpi-change">Extraordinary (avg ~25%)</div>
        </div>
    </div>

    <!-- Management Guidance Section -->
    <div class="guidance-section" id="guidanceSection">
        <div class="guidance-header">
            <h3>Management Guidance</h3>
            <span class="guidance-meta">As of <span id="guidanceAsOf">Q3 2025 Trading Update (30 October 2025)</span> | <span id="guidanceFY">FY2025</span></span>
        </div>
        <div class="guidance-grid" id="guidanceGrid"></div>
        <div class="guidance-commentary" id="guidanceCommentary"></div>
    </div>

    <!-- Charts Section -->
    <h2 class="section-title">Financial Performance Analysis</h2>
    <div class="charts-container">
        <div class="chart-card">
            <div class="chart-header">
                <h3>Net Trading Income (Volatility Correlation)</h3>
                <button class="help-btn" onclick="openModal('nti')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="ntiChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">
                <h3>EBITDA Margin Trend</h3>
                <button class="help-btn" onclick="openModal('margin')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="marginChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">
                <h3>Net Profit & EPS (Extreme Volatility)</h3>
                <button class="help-btn" onclick="openModal('profit')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="profitChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">
                <h3>Shareholders' Equity Growth</h3>
                <button class="help-btn" onclick="openModal('equity')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="equityChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">
                <h3>Operating Leverage (NTI vs Fixed Opex)</h3>
                <button class="help-btn" onclick="openModal('leverage')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="leverageChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">
                <h3>ETP Value Traded (Volume Indicator)</h3>
                <button class="help-btn" onclick="openModal('volume')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="volumeChart"></canvas>
            </div>
        </div>
    </div>

    <!-- DCF Valuation Section -->
    <h2 class="section-title">DCF Valuation</h2>
    <div class="dcf-section">
        <div class="dcf-summary">
            <div class="dcf-card highlight">
                <div class="dcf-label">Intrinsic Value (Base)</div>
                <div class="dcf-value" id="dcfIV">€62.21</div>
                <div class="dcf-change positive" id="dcfUpside">+126% upside</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Entry Price (15% CAGR)</div>
                <div class="dcf-value" id="dcfEntry">€25.08</div>
                <div class="dcf-sublabel">Buy below for 15% annual return</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Current Price</div>
                <div class="dcf-value" id="dcfCurrent">€27.50</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Prob-Weighted IV</div>
                <div class="dcf-value" id="dcfWeighted">€64.51</div>
                <div class="dcf-sublabel">30% Bull / 45% Base / 25% Bear</div>
            </div>
        </div>

        <div class="dcf-warning" id="growthWarning">
            <span class="warning-icon">⚠</span>
            <span id="warningText">Equity CAGR significantly lower than EPS/Profit CAGR due to extreme volatility in earnings (FY2020: €464.5M, FY2023: €36.2M). Using conservative equity growth as primary driver for trading firm with volatile earnings. Equity growth more stable and sustainable.</span>
        </div>

        <div class="dcf-controls">
            <div class="slider-group">
                <label>Growth Rate: <span id="growthValue">8.2%</span></label>
                <input type="range" id="growthSlider" min="0" max="30" value="8.2" step="0.1">
                <div class="slider-hint" id="growthHint">Based on equity 3yr CAGR</div>
            </div>
            <div class="slider-group">
                <label>WACC: <span id="waccValue">11.0%</span></label>
                <input type="range" id="waccSlider" min="6" max="18" value="11.0" step="0.5">
            </div>
            <div class="slider-group">
                <label>Terminal Growth: <span id="terminalValue">2.5%</span></label>
                <input type="range" id="terminalSlider" min="0" max="5" value="2.5" step="0.5">
            </div>
        </div>

        <div class="scenario-tabs">
            <button class="scenario-tab active" data-scenario="base" onclick="switchScenario('base')">Base Case</button>
            <button class="scenario-tab" data-scenario="bull" onclick="switchScenario('bull')">Bull Case</button>
            <button class="scenario-tab" data-scenario="bear" onclick="switchScenario('bear')">Bear Case</button>
        </div>

        <div class="scenario-details" id="scenarioDetails">
            <div class="scenario-assumptions">
                <h4>Assumptions</h4>
                <div class="assumption-grid" id="assumptionGrid"></div>
            </div>
        </div>

        <div class="sensitivity-section">
            <h4>Sensitivity Analysis: Intrinsic Value by WACC & Terminal Growth</h4>
            <table class="sensitivity-table" id="sensitivityMatrix"></table>
        </div>

        <div class="historical-growth">
            <h4>Historical Growth Rates (CAGR)</h4>
            <div class="growth-grid" id="growthGrid"></div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle"></h3>
                <button class="modal-close" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        // EMBEDDED DATA - No external fetch required
        const csvData = `Period,NetTradingIncome,TotalIncome,EBITDA,EBITDAMargin,NetProfit,BasicEPS,ShareholdersEquity,TradingCapital,Employees,ETPValueTraded,TotalValueTraded,VariableComp,FixedOpex
H1 2025,283.6,279.0,130.3,46.7,87.5,2.01,,,609,,,122.0,100.5
FY2024,467.8,479.3,217.1,45.3,159.5,3.69,766.6,775.0,609,1545,6248,85.3,176.9
H1 2024,206.6,205.8,83.6,40.6,59.0,1.36,,,613,,,57.1,87.2
FY2023,300.3,303.9,69.8,23.0,36.2,0.84,585.8,583.7,613,1464,5648,53.9,180.1
H1 2023,146.5,148.1,32.5,21.9,17.3,0.40,,,620,,,23.9,93.5
FY2022,459.5,460.6,208.2,45.2,150.2,3.45,606.3,651.0,660,1775,6251,103.7,161.6
H1 2022,230.8,232.2,108.0,46.5,78.2,1.79,,,640,,,56.0,78.6
FY2021,384.0,387.1,159.4,41.5,114.9,2.63,435.5,426.9,610,1541,5103,102.5,122.1
H1 2021,187.1,189.4,78.4,41.4,57.2,1.31,,,570,,,52.5,60.0
FY2020,933.4,936.5,586.7,62.8,464.5,10.26,413.1,388.6,556,1440,5250,228.1,114.6
H1 2020,631.3,633.4,427.7,67.5,335.9,7.42,,,530,,,168.5,57.1
FY2019,216.4,216.4,78.9,36.5,53.1,1.15,232.2,223.2,484,899,2945,44.8,93.6
H1 2019,116.8,116.8,46.5,39.8,31.6,0.68,,,458,,,27.0,43.2
FY2018,383.4,383.4,199.8,52.1,160.9,3.46,260.7,252.0,431,1174,2811,90.6,93.1
H1 2018,214.2,214.2,119.5,55.8,96.3,2.07,,,410,,,54.5,46.1
FY2017,166.0,166.0,56.0,33.8,39.4,0.85,188.8,186.0,373,686,1779,26.5,83.9
H1 2017,86.5,86.5,31.2,36.1,21.7,0.47,,,360,,,15.2,40.1
FY2016,250.0,250.0,118.7,47.5,92.2,1.98,192.8,188.5,341,848,2340,40.2,90.9
H1 2016,110.4,110.4,47.5,43.0,35.2,0.76,,,325,,,18.5,43.4
FY2015,304.7,304.7,156.7,51.4,128.5,2.76,171.3,170.0,268,645,1918,53.0,95.0`;

        const analysis = {
            "ticker": "FLOW.AS",
            "company_name": "Flow Traders Ltd.",
            "guidance": {
                "as_of": "Q3 2025 Trading Update (30 October 2025)",
                "fiscal_year": "FY2025",
                "items": [
                    {
                        "metric": "Fixed Operating Expenses",
                        "target": "€200-205 million",
                        "period": "FY2025",
                        "vs_prior": "raised",
                        "notes": "Increase driven by additional technology investments and targeted additions of subject matter experts in growth areas (digital assets, quantitative research, Asia)."
                    },
                    {
                        "metric": "Interest Expenses",
                        "target": "~€3 million",
                        "period": "Q4 2025 (from November)",
                        "vs_prior": "new",
                        "notes": "Related to $200m private credit facility secured in October 2025. Implies approximately €12m annual interest expense on full-year basis."
                    },
                    {
                        "metric": "Trading Capital",
                        "target": "Continued growth",
                        "period": "Ongoing",
                        "vs_prior": "maintained",
                        "notes": "Trading Capital reached €848m at end-Q3 2025 (+27% YoY). Company will continue to pursue strategic debt financing options to support growth. $75m revolver provides additional capacity as needed."
                    },
                    {
                        "metric": "Technology Investments",
                        "target": "Continued elevated investment",
                        "period": "FY2025 and beyond",
                        "vs_prior": "maintained",
                        "notes": "Focus on technology transformation to support greater volumes, improve quantitative capabilities, and enhance operational efficiency. AI, machine learning, and big data initiatives under CTO Owain Lloyd."
                    }
                ],
                "management_commentary": "CEO nominee Thomas Spitz (Q3 2025): 'Following a first half of the year marked by global trade disruptions and uncertainties, the third quarter saw a more muted market trading environment. Nevertheless, we were able to generate a solid EBITDA margin of 24% in the quarter. We continue to execute on our key strategic initiatives... We remain committed to our technology transformation to support greater volumes, improve our quantitative capabilities and enhance operational efficiency. In Digital Assets, we remain a leader in the build-up of this once in a generation opportunity... We expect to be able to fully support 24/7 trading for all our partners across TradFi and DeFi markets soon. Over the coming months, with the support of the Board and the rest of the leadership team, I plan to develop an ambitious growth strategy and execution plan which we will present at our Capital Markets Day next year.'"
            }
        };

        const dcfData = {
            "ticker": "FLOW.AS",
            "current_price": 27.50,
            "inputs": {
                "shares_outstanding": 43.236,
                "net_debt": -766.6,
                "last_fcf": 159.5,
                "trading_capital": 775.0
            },
            "historical_growth": {
                "revenue_3yr_cagr": 15.9,
                "revenue_5yr_cagr": 16.7,
                "eps_3yr_cagr": 63.6,
                "eps_5yr_cagr": 26.2,
                "equity_3yr_cagr": 8.2,
                "equity_5yr_cagr": 27.0,
                "fcf_3yr_cagr": 63.6,
                "fcf_5yr_cagr": 24.5,
                "selected_growth_rate": 8.2,
                "growth_rate_source": "equity_3yr_cagr",
                "growth_divergence_warning": true
            },
            "assumptions": {
                "base": {
                    "description": "Normalized volatility environment with moderate ROE on expanded trading capital. Assumes continued Asia growth and digital asset adoption but with competitive pressure on margins.",
                    "wacc": 11.0,
                    "terminal_growth": 2.5,
                    "roe": 18.0,
                    "growth_rates": [10.0, 9.0, 8.0, 7.0, 6.0],
                    "fcf_margin": 18.0
                },
                "bull": {
                    "description": "Elevated volatility environment (VIX >20), successful Asia expansion, digital asset breakout, AllUnity stablecoin gains traction, Trading Capital Expansion delivers >25% ROE.",
                    "wacc": 10.0,
                    "terminal_growth": 3.0,
                    "roe": 25.0,
                    "growth_rates": [15.0, 14.0, 12.0, 10.0, 8.0],
                    "fcf_margin": 25.0
                },
                "bear": {
                    "description": "Extended low volatility period (VIX <15), competitive pressure from Citadel/Virtu alliance, Asia geopolitical disruption, digital asset regulatory crackdown, margin compression.",
                    "wacc": 12.5,
                    "terminal_growth": 2.0,
                    "roe": 8.0,
                    "growth_rates": [5.0, 4.0, 3.0, 3.0, 2.0],
                    "fcf_margin": 8.0
                }
            },
            "valuation": {
                "base": {
                    "intrinsic_value": 62.21,
                    "upside": 126.2,
                    "entry_price": 25.08
                },
                "bull": {
                    "intrinsic_value": 100.95,
                    "upside": 267.1,
                    "entry_price": 48.32
                },
                "bear": {
                    "intrinsic_value": 41.07,
                    "upside": 49.3,
                    "entry_price": 15.87
                }
            },
            "sensitivity": {
                "wacc_range": [9.0, 10.0, 11.0, 12.0, 13.0],
                "terminal_growth_range": [1.5, 2.0, 2.5, 3.0, 3.5],
                "matrix": [
                    [78.45, 82.31, 86.77, 92.03, 98.35],
                    [69.32, 72.54, 76.23, 80.49, 85.46],
                    [61.82, 64.49, 67.51, 70.96, 74.93],
                    [55.56, 57.78, 60.27, 63.07, 66.24],
                    [50.27, 52.11, 54.17, 56.48, 59.08]
                ]
            },
            "probability_weighted": {
                "weighted_iv": 64.51,
                "weighted_upside": 134.6
            }
        };

        // Parse CSV
        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const headers = lines[0].split(',');
            return lines.slice(1).map(line => {
                const values = line.split(',');
                const obj = {};
                headers.forEach((h, i) => obj[h.trim()] = values[i]?.trim());
                return obj;
            });
        }

        const data = parseCSV(csvData);

        // Sort data chronologically (oldest first) for charts
        data.sort((a, b) => {
            const parseDate = (p) => {
                const year = parseInt(p.match(/\d{4}/)?.[0] || '0');
                const isQ1 = p.includes('Q1');
                const isQ2 = p.includes('Q2');
                const isQ3 = p.includes('Q3');
                const isQ4 = p.includes('Q4');
                const isH1 = p.includes('H1');
                const isH2 = p.includes('H2');
                const isFY = p.startsWith('FY');
                const subOrder = isQ1 ? 1 : isQ2 ? 2 : isH1 ? 3 : isQ3 ? 4 : isQ4 ? 5 : isH2 ? 6 : isFY ? 7 : 0;
                return year * 10 + subOrder;
            };
            return parseDate(a.Period) - parseDate(b.Period);
        });

        const fyData = data.filter(d => d.Period.startsWith('FY'));

        // Toggle overview
        function toggleOverview() {
            const btn = document.querySelector('.overview-toggle');
            const content = document.getElementById('overviewContent');
            btn.classList.toggle('active');
            content.classList.toggle('active');
        }

        // Render guidance
        function renderGuidance() {
            const guidance = analysis.guidance;
            const grid = document.getElementById('guidanceGrid');
            grid.innerHTML = guidance.items.map(item => {
                const vsClass = item.vs_prior ? item.vs_prior.toLowerCase() : 'new';
                const vsLabel = item.vs_prior ? item.vs_prior.charAt(0).toUpperCase() + item.vs_prior.slice(1) : 'New';
                return `
                    <div class="guidance-card">
                        <div class="guidance-metric">${item.metric}</div>
                        <div class="guidance-target">${item.target}</div>
                        <div class="guidance-period">${item.period}</div>
                        <span class="guidance-vs-prior ${vsClass}">${vsLabel}</span>
                        ${item.notes ? `<div class="guidance-notes">${item.notes}</div>` : ''}
                    </div>
                `;
            }).join('');

            const commentary = document.getElementById('guidanceCommentary');
            if (guidance.management_commentary) {
                commentary.textContent = guidance.management_commentary;
                commentary.style.display = 'block';
            }
        }

        renderGuidance();

        // Chart defaults
        const chartDefaults = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { labels: { color: '#e0e0e0', font: { size: 11 } } }
            },
            scales: {
                x: { ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,0.05)' } },
                y: { ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,0.05)' } }
            }
        };

        const colors = {
            primary: '#00d4aa',
            secondary: '#00b894',
            tertiary: '#0984e3',
            quaternary: '#6c5ce7',
            warning: '#fdcb6e',
            danger: '#ff6b6b'
        };

        // NTI Chart
        new Chart(document.getElementById('ntiChart'), {
            type: 'bar',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'Net Trading Income (€M)',
                    data: fyData.map(d => parseFloat(d.NetTradingIncome)),
                    backgroundColor: colors.primary,
                    borderColor: colors.secondary,
                    borderWidth: 1
                }]
            },
            options: {
                ...chartDefaults,
                plugins: {
                    ...chartDefaults.plugins,
                    tooltip: {
                        callbacks: {
                            label: (context) => `€${context.parsed.y}M`
                        }
                    }
                }
            }
        });

        // EBITDA Margin Chart
        new Chart(document.getElementById('marginChart'), {
            type: 'line',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'EBITDA Margin (%)',
                    data: fyData.map(d => parseFloat(d.EBITDAMargin)),
                    borderColor: colors.tertiary,
                    backgroundColor: 'rgba(9, 132, 227, 0.1)',
                    fill: true,
                    tension: 0.4,
                    borderWidth: 2
                }]
            },
            options: {
                ...chartDefaults,
                plugins: {
                    ...chartDefaults.plugins,
                    tooltip: {
                        callbacks: {
                            label: (context) => `${context.parsed.y}%`
                        }
                    }
                }
            }
        });

        // Profit & EPS Chart
        new Chart(document.getElementById('profitChart'), {
            type: 'bar',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [
                    {
                        label: 'Net Profit (€M)',
                        data: fyData.map(d => parseFloat(d.NetProfit)),
                        backgroundColor: colors.primary,
                        yAxisID: 'y'
                    },
                    {
                        label: 'EPS (€)',
                        data: fyData.map(d => parseFloat(d.BasicEPS)),
                        backgroundColor: colors.warning,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                ...chartDefaults,
                scales: {
                    x: { ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,0.05)' } },
                    y: {
                        type: 'linear',
                        position: 'left',
                        ticks: { color: '#888' },
                        grid: { color: 'rgba(255,255,255,0.05)' },
                        title: { display: true, text: 'Net Profit (€M)', color: '#888' }
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        ticks: { color: '#888' },
                        grid: { display: false },
                        title: { display: true, text: 'EPS (€)', color: '#888' }
                    }
                }
            }
        });

        // Equity Chart
        const equityDataFiltered = fyData.filter(d => d.ShareholdersEquity && d.ShareholdersEquity !== '');
        new Chart(document.getElementById('equityChart'), {
            type: 'line',
            data: {
                labels: equityDataFiltered.map(d => d.Period),
                datasets: [{
                    label: 'Shareholders\' Equity (€M)',
                    data: equityDataFiltered.map(d => parseFloat(d.ShareholdersEquity)),
                    borderColor: colors.secondary,
                    backgroundColor: 'rgba(0, 184, 148, 0.2)',
                    fill: true,
                    tension: 0.4,
                    borderWidth: 2
                }]
            },
            options: chartDefaults
        });

        // Operating Leverage Chart
        const leverageData = fyData.filter(d => d.FixedOpex && d.FixedOpex !== '');
        new Chart(document.getElementById('leverageChart'), {
            type: 'line',
            data: {
                labels: leverageData.map(d => d.Period),
                datasets: [
                    {
                        label: 'Net Trading Income (€M)',
                        data: leverageData.map(d => parseFloat(d.NetTradingIncome)),
                        borderColor: colors.primary,
                        backgroundColor: 'rgba(0, 212, 170, 0.1)',
                        fill: false,
                        tension: 0.4,
                        borderWidth: 2
                    },
                    {
                        label: 'Fixed Opex (€M)',
                        data: leverageData.map(d => parseFloat(d.FixedOpex)),
                        borderColor: colors.danger,
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        fill: false,
                        tension: 0.4,
                        borderWidth: 2
                    }
                ]
            },
            options: chartDefaults
        });

        // ETP Volume Chart
        const volumeData = fyData.filter(d => d.ETPValueTraded && d.ETPValueTraded !== '');
        new Chart(document.getElementById('volumeChart'), {
            type: 'bar',
            data: {
                labels: volumeData.map(d => d.Period),
                datasets: [{
                    label: 'ETP Value Traded (€B)',
                    data: volumeData.map(d => parseFloat(d.ETPValueTraded)),
                    backgroundColor: colors.quaternary,
                    borderColor: colors.tertiary,
                    borderWidth: 1
                }]
            },
            options: chartDefaults
        });

        // Modal functions
        const metricDescriptions = {
            nti: {
                title: "Net Trading Income (NTI)",
                content: `
                    <p><strong>Net Trading Income</strong> is Flow Traders' primary revenue metric, representing income earned from bid-ask spreads across all market making activities (ETPs, FICC, digital assets).</p>
                    <div class="metric-highlight">
                        <strong>For Flow Traders:</strong> NTI is HIGHLY correlated with market volatility. The company does not take directional market views but profits from providing liquidity regardless of market direction. Higher volatility = wider spreads and more trading opportunities = higher NTI.
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li><strong>VIX levels:</strong> VIX >20 = strong performance (Q2 2025: €126M @ VIX 23.6), VIX <15 = weak (FY2023: €300M annual)</li>
                        <li><strong>COVID spike:</strong> FY2020 delivered record €933M NTI at 62.8% EBITDA margin due to extreme volatility</li>
                        <li><strong>Geographic mix:</strong> Asia growth (+70% YoY in 9M 2025) diversifying revenue sources</li>
                        <li><strong>Digital assets:</strong> Provide countercyclical diversification to traditional ETP volatility patterns</li>
                    </ul>
                    <p>NTI volatility is a feature, not a bug - investors must accept earnings unpredictability inherent to market making business model.</p>
                `
            },
            margin: {
                title: "EBITDA Margin",
                content: `
                    <p><strong>EBITDA Margin</strong> measures profitability as percentage of Net Trading Income, showing operational efficiency and scalability of the business model.</p>
                    <div class="metric-highlight">
                        <strong>For Flow Traders:</strong> EBITDA margin demonstrates significant operating leverage. Fixed costs (technology, employee base, infrastructure) spread over variable revenue. Higher NTI environments show dramatic margin expansion.
                    </div>
                    <p><strong>Historical range:</strong></p>
                    <ul>
                        <li><strong>FY2020 (COVID):</strong> 62.8% margin - exceptional volatility drove record efficiency</li>
                        <li><strong>H1 2025:</strong> 46.7% margin - strong performance in elevated volatility environment</li>
                        <li><strong>FY2023:</strong> 23.0% margin - low volatility compressed profitability</li>
                        <li><strong>Target range:</strong> 35-45% in normalized environments</li>
                    </ul>
                    <p><strong>Key drivers:</strong> Fixed opex guidance of €200-205M for FY2025 provides operating leverage at scale. Variable compensation (18% of NTI in FY2024) aligns employee incentives with performance.</p>
                `
            },
            profit: {
                title: "Net Profit & EPS",
                content: `
                    <p><strong>Net Profit and Earnings Per Share (EPS)</strong> show extreme volatility reflecting Flow Traders' business model dependence on market conditions.</p>
                    <div class="metric-highlight">
                        <strong>Extreme Volatility Warning:</strong> FY2020: €464.5M profit (€10.26 EPS) | FY2021: €114.9M | FY2022: €150.2M | FY2023: €36.2M (€0.84 EPS) | FY2024: €159.5M (€3.69 EPS)
                    </div>
                    <p><strong>Why such volatility?</strong></p>
                    <ul>
                        <li>Market volatility directly impacts revenue (NTI) which flows through to profit with operating leverage</li>
                        <li>No ability to control or predict market volatility levels (VIX is mean-reverting but timing uncertain)</li>
                        <li>Variable compensation model (€228M in FY2020 vs €54M in FY2023) creates earnings sensitivity</li>
                        <li>Fixed costs create downside amplification in low-revenue environments</li>
                    </ul>
                    <p><strong>Investment implication:</strong> Traditional P/E multiples less meaningful due to earnings volatility. Focus on normalized earnings power (15-20% ROE on growing equity base) and through-cycle profitability rather than single-year results.</p>
                `
            },
            equity: {
                title: "Shareholders' Equity",
                content: `
                    <p><strong>Shareholders' Equity</strong> is the most stable financial metric for Flow Traders and the foundation for the Trading Capital Expansion Plan.</p>
                    <div class="metric-highlight">
                        <strong>For Flow Traders:</strong> Equity = Trading Capital available for market making. Growth from €171M (FY2015) to €767M (FY2024) represents 5-year CAGR of 27%. More capital = more trading opportunities = higher revenue potential.
                    </div>
                    <p><strong>Trading Capital Expansion Plan:</strong></p>
                    <ul>
                        <li>Dividend suspended (July 2024) to retain earnings and grow capital base</li>
                        <li>$200M term loan + $75M revolver secured (Oct 2025) to accelerate growth</li>
                        <li>Trading Capital reached €848M (Q3 2025), +27% YoY</li>
                        <li>Target: Continue growing capital to maximize long-term value creation</li>
                    </ul>
                    <p><strong>Capital efficiency:</strong> FY2024 delivered 68% Return on Trading Capital (ROTC) and 21% ROE, validating strategy. Each €100M additional capital can generate €15-25M annual profit at normalized 15-25% ROE.</p>
                `
            },
            leverage: {
                title: "Operating Leverage",
                content: `
                    <p><strong>Operating Leverage</strong> compares Net Trading Income (variable revenue) to Fixed Operating Expenses, demonstrating scalability of the business model.</p>
                    <div class="metric-highlight">
                        <strong>For Flow Traders:</strong> Fixed costs (technology infrastructure, employee salaries, office space) are relatively stable at €200-205M annually (FY2025 guidance). As NTI scales, incremental revenue flows through at high margins.
                    </div>
                    <p><strong>Scalability demonstrated:</strong></p>
                    <ul>
                        <li><strong>FY2020:</strong> €933M NTI on €115M fixed opex = 62.8% EBITDA margin</li>
                        <li><strong>H1 2025:</strong> €284M NTI on ~€100M fixed opex = 46.7% EBITDA margin</li>
                        <li><strong>FY2023:</strong> €300M NTI on €180M fixed opex = 23.0% EBITDA margin (low leverage)</li>
                    </ul>
                    <p><strong>Investment thesis:</strong> Technology investments (40%+ of workforce) create automation and efficiency that improve operating leverage over time. Fixed cost base grows slower than revenue potential as trading capital expands, creating margin expansion opportunity.</p>
                `
            },
            volume: {
                title: "ETP Value Traded",
                content: `
                    <p><strong>ETP Value Traded</strong> measures total transaction volume facilitated by Flow Traders across all ETP products globally, providing a volume indicator complementary to NTI.</p>
                    <div class="metric-highlight">
                        <strong>For Flow Traders:</strong> H1 2025 ETP Value Traded hit all-time high of €999bn (+32% YoY). Global ETP market value traded grew to €30.9T. Flow Traders' participation rate approximately 3.2% globally, 10-15% in Europe specifically.
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li><strong>Volume growth:</strong> Indicates market share gains and trading capacity expansion</li>
                        <li><strong>Global ETP AuM:</strong> Reached $16.9T (+14% H1 2025) with record $898bn inflows - structural tailwind</li>
                        <li><strong>Active ETFs:</strong> Growing 5x faster than passive, creating enhanced market making opportunities</li>
                        <li><strong>Asia expansion:</strong> China ETP market growing rapidly, Flow Traders capturing share</li>
                    </ul>
                    <p><strong>Relationship to NTI:</strong> Higher volumes generally correlate with higher NTI, but profitability also depends on spreads (volatility). Can have high volumes with low spreads (low volatility) resulting in modest NTI.</p>
                `
            }
        };

        function openModal(key) {
            document.getElementById('modalTitle').textContent = metricDescriptions[key].title;
            document.getElementById('modalBody').innerHTML = metricDescriptions[key].content;
            document.getElementById('modalOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event && event.target.className !== 'modal-overlay') return;
            document.getElementById('modalOverlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

        // DCF Functions
        let currentScenario = 'base';

        function calculateDCF(growthRate, wacc, terminalGrowth) {
            const years = 5;
            const equity = 766.6;
            const roe = dcfData.assumptions[currentScenario].roe / 100;

            let pvFCF = 0;
            let currentEquity = equity;

            for (let i = 0; i < years; i++) {
                currentEquity *= (1 + growthRate / 100);
                const fcf = currentEquity * roe;
                pvFCF += fcf / Math.pow(1 + wacc/100, i + 1);
            }

            const terminalFCF = currentEquity * (1 + terminalGrowth/100) * roe;
            const terminalValue = terminalFCF / (wacc/100 - terminalGrowth/100);
            const pvTerminal = terminalValue / Math.pow(1 + wacc/100, years);

            const enterpriseValue = pvFCF + pvTerminal;
            const equityValue = enterpriseValue + dcfData.inputs.net_debt;
            const iv = equityValue / dcfData.inputs.shares_outstanding;

            const terminalPerShare = terminalValue / dcfData.inputs.shares_outstanding;
            const entryPrice = terminalPerShare / Math.pow(1.15, years);

            return { iv, entryPrice, terminalPerShare };
        }

        window.updateDCFDisplay = function() {
            const growth = parseFloat(document.getElementById('growthSlider').value);
            const wacc = parseFloat(document.getElementById('waccSlider').value);
            const terminal = parseFloat(document.getElementById('terminalSlider').value);

            document.getElementById('growthValue').textContent = growth.toFixed(1) + '%';
            document.getElementById('waccValue').textContent = wacc.toFixed(1) + '%';
            document.getElementById('terminalValue').textContent = terminal.toFixed(1) + '%';

            const result = calculateDCF(growth, wacc, terminal);

            document.getElementById('dcfIV').textContent = '€' + result.iv.toFixed(2);
            document.getElementById('dcfEntry').textContent = '€' + result.entryPrice.toFixed(2);

            const upside = ((result.iv - dcfData.current_price) / dcfData.current_price * 100);
            const upsideEl = document.getElementById('dcfUpside');
            upsideEl.textContent = (upside >= 0 ? '+' : '') + upside.toFixed(0) + '% ' + (upside >= 0 ? 'upside' : 'downside');
            upsideEl.className = 'dcf-change ' + (upside >= 0 ? 'positive' : 'negative');

            const grid = document.getElementById('assumptionGrid');
            const scenario = dcfData.assumptions[currentScenario];
            grid.innerHTML = `
                <div class="assumption-item">
                    <div class="label">Growth Rate</div>
                    <div class="value">${growth.toFixed(1)}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">WACC</div>
                    <div class="value">${wacc.toFixed(1)}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Terminal Growth</div>
                    <div class="value">${terminal.toFixed(1)}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">ROE Assumption</div>
                    <div class="value">${scenario.roe.toFixed(1)}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Intrinsic Value</div>
                    <div class="value" style="color: #00d4aa;">€${result.iv.toFixed(2)}</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Entry Price (15% CAGR)</div>
                    <div class="value" style="color: #00d4aa;">€${result.entryPrice.toFixed(2)}</div>
                </div>
            `;
        };

        window.switchScenario = function(scenario) {
            currentScenario = scenario;

            document.querySelectorAll('.scenario-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.scenario === scenario);
            });

            const assumptions = dcfData.assumptions[scenario];
            const valuation = dcfData.valuation[scenario];

            document.getElementById('growthSlider').value = dcfData.historical_growth.selected_growth_rate;
            document.getElementById('waccSlider').value = assumptions.wacc;
            document.getElementById('terminalSlider').value = assumptions.terminal_growth;

            updateDCFDisplay();
        };

        function renderHistoricalGrowth() {
            const growth = dcfData.historical_growth;
            const selectedSource = growth.growth_rate_source;
            const grid = document.getElementById('growthGrid');

            const metrics = [
                { key: 'revenue_3yr_cagr', label: 'Revenue 3Y' },
                { key: 'revenue_5yr_cagr', label: 'Revenue 5Y' },
                { key: 'eps_3yr_cagr', label: 'EPS 3Y' },
                { key: 'eps_5yr_cagr', label: 'EPS 5Y' },
                { key: 'equity_3yr_cagr', label: 'Equity 3Y' },
                { key: 'equity_5yr_cagr', label: 'Equity 5Y' },
                { key: 'fcf_3yr_cagr', label: 'FCF 3Y' },
                { key: 'fcf_5yr_cagr', label: 'FCF 5Y' }
            ];

            grid.innerHTML = metrics.map(m => {
                const rate = growth[m.key];
                const isSelected = m.key === selectedSource;
                const colorClass = rate >= 0 ? 'positive' : 'negative';
                return `
                    <div class="growth-item ${isSelected ? 'selected' : ''}">
                        <div class="metric">${m.label}</div>
                        <div class="rate ${colorClass}">${rate >= 0 ? '+' : ''}${rate.toFixed(1)}%</div>
                    </div>
                `;
            }).join('');
        }

        function renderSensitivityMatrix() {
            const sens = dcfData.sensitivity;
            const table = document.getElementById('sensitivityMatrix');
            const currentPrice = dcfData.current_price;

            let html = '<tr><th>WACC \\ Term G</th>';
            sens.terminal_growth_range.forEach(tg => {
                html += `<th>${tg}%</th>`;
            });
            html += '</tr>';

            sens.wacc_range.forEach((wacc, i) => {
                html += `<tr><th>${wacc}%</th>`;
                sens.matrix[i].forEach((val, j) => {
                    const isHighlight = wacc === dcfData.assumptions.base.wacc &&
                                       sens.terminal_growth_range[j] === dcfData.assumptions.base.terminal_growth;
                    const colorClass = val >= currentPrice ? 'above-current' : 'below-current';
                    html += `<td class="${isHighlight ? 'highlight' : colorClass}">€${val.toFixed(0)}</td>`;
                });
                html += '</tr>';
            });

            table.innerHTML = html;
        }

        // Initialize DCF
        renderHistoricalGrowth();
        renderSensitivityMatrix();
        updateDCFDisplay();

        // Bind slider events
        document.getElementById('growthSlider').oninput = updateDCFDisplay;
        document.getElementById('waccSlider').oninput = updateDCFDisplay;
        document.getElementById('terminalSlider').oninput = updateDCFDisplay;
    </script>
</body>
</html>
