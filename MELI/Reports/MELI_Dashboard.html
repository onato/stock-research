<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MercadoLibre (MELI) Financial Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #00d4aa, #00b894);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .header p {
            color: #888;
            font-size: 1.1rem;
        }
        /* Investment Overview Section */
        .overview-section {
            max-width: 1400px;
            margin: 0 auto 30px;
        }
        .overview-toggle {
            width: 100%;
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid rgba(0, 212, 170, 0.3);
            border-radius: 12px;
            padding: 16px 24px;
            color: #00d4aa;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }
        .overview-toggle:hover {
            background: rgba(0, 212, 170, 0.2);
        }
        .overview-toggle .arrow {
            transition: transform 0.3s ease;
        }
        .overview-toggle.active .arrow {
            transform: rotate(180deg);
        }
        .overview-content {
            display: none;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: none;
            border-radius: 0 0 12px 12px;
            padding: 30px;
            margin-top: -12px;
        }
        .overview-content.active {
            display: block;
        }
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }
        .overview-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .overview-card h3 {
            color: #00d4aa;
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .overview-card p {
            margin-bottom: 12px;
            line-height: 1.6;
        }
        .overview-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .overview-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            line-height: 1.5;
        }
        .overview-card li:last-child {
            border-bottom: none;
        }
        .overview-card.bull h3 { color: #00d4aa; }
        .overview-card.bear h3 { color: #ff6b6b; }
        .overview-card.risks h3 { color: #fdcb6e; }
        .risk-high { color: #ff6b6b; }
        .risk-moderate { color: #fdcb6e; }
        .risk-low { color: #00d4aa; }
        .revenue-stream {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .revenue-stream .percent {
            color: #00d4aa;
            font-weight: 600;
        }
        .trend-growing { color: #00d4aa; }
        .trend-stable { color: #888; }
        .trend-declining { color: #ff6b6b; }
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }
        .kpi-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 170, 0.2);
        }
        .kpi-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00d4aa;
            margin-bottom: 5px;
        }
        .kpi-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .kpi-change {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .kpi-change.positive { color: #00d4aa; }
        .kpi-change.negative { color: #ff6b6b; }
        /* Guidance Section */
        .guidance-section {
            max-width: 1400px;
            margin: 0 auto 30px;
        }
        .guidance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .guidance-header h3 {
            color: #fff;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .guidance-header h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #00d4aa, #00b894);
            border-radius: 2px;
        }
        .guidance-meta {
            font-size: 0.85rem;
            color: #888;
        }
        .guidance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .guidance-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 18px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.2s ease;
        }
        .guidance-card:hover {
            transform: translateY(-2px);
        }
        .guidance-metric {
            font-size: 0.8rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        .guidance-target {
            font-size: 1.4rem;
            font-weight: 600;
            color: #00d4aa;
            margin-bottom: 6px;
        }
        .guidance-period {
            font-size: 0.85rem;
            color: #e0e0e0;
            margin-bottom: 8px;
        }
        .guidance-vs-prior {
            display: inline-block;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 500;
        }
        .guidance-vs-prior.raised {
            background: rgba(0, 212, 170, 0.15);
            color: #00d4aa;
        }
        .guidance-vs-prior.lowered {
            background: rgba(255, 107, 107, 0.15);
            color: #ff6b6b;
        }
        .guidance-vs-prior.maintained {
            background: rgba(255, 255, 255, 0.1);
            color: #888;
        }
        .guidance-vs-prior.new {
            background: rgba(99, 102, 241, 0.15);
            color: #818cf8;
        }
        .guidance-notes {
            font-size: 0.8rem;
            color: #666;
            margin-top: 8px;
            line-height: 1.4;
        }
        .guidance-commentary {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            padding: 16px 20px;
            border-left: 3px solid #00d4aa;
            font-style: italic;
            color: #b0b0b0;
            line-height: 1.6;
        }
        .guidance-commentary::before {
            content: '"';
            font-size: 1.5rem;
            color: #00d4aa;
            margin-right: 4px;
        }
        .section-title {
            font-size: 1.5rem;
            color: #fff;
            margin: 40px auto 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 212, 170, 0.3);
            max-width: 1400px;
        }
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .chart-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .chart-header h3 {
            color: #fff;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .chart-header h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #00d4aa, #00b894);
            border-radius: 2px;
        }
        .help-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(0, 212, 170, 0.2);
            border: 1px solid #00d4aa;
            color: #00d4aa;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        .help-btn:hover {
            background: #00d4aa;
            color: #1a1a2e;
        }
        .chart-wrapper {
            position: relative;
            height: 300px;
        }
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: linear-gradient(135deg, #1e2a4a 0%, #16213e 100%);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(0, 212, 170, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-header h3 {
            color: #00d4aa;
            font-size: 1.4rem;
            margin: 0;
        }
        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            background: #ff6b6b;
            color: #fff;
        }
        .modal-body {
            padding: 25px;
            line-height: 1.7;
        }
        .modal-body p { margin-bottom: 15px; }
        .modal-body strong { color: #00d4aa; }
        .modal-body ul { margin: 15px 0; padding-left: 20px; }
        .modal-body li { margin-bottom: 8px; }
        .metric-highlight {
            background: rgba(0, 212, 170, 0.1);
            border-left: 3px solid #00d4aa;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        /* DCF Valuation Section */
        .dcf-section {
            max-width: 1400px;
            margin: 0 auto 40px;
        }
        .dcf-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .dcf-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }
        .dcf-card:hover {
            transform: translateY(-3px);
        }
        .dcf-card.highlight {
            background: rgba(0, 212, 170, 0.1);
            border-color: rgba(0, 212, 170, 0.3);
        }
        .dcf-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        .dcf-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #00d4aa;
        }
        .dcf-card:not(.highlight) .dcf-value {
            color: #fff;
        }
        .dcf-change {
            font-size: 1rem;
            margin-top: 8px;
            font-weight: 600;
        }
        .dcf-change.positive { color: #00d4aa; }
        .dcf-change.negative { color: #ff6b6b; }
        .dcf-sublabel {
            font-size: 0.8rem;
            color: #666;
            margin-top: 8px;
        }
        .dcf-warning {
            background: rgba(253, 203, 110, 0.15);
            border: 1px solid rgba(253, 203, 110, 0.4);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fdcb6e;
        }
        .warning-icon {
            font-size: 1.2rem;
        }
        .dcf-inputs {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .dcf-inputs h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
            font-size: 1rem;
        }
        .dcf-inputs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .dcf-input-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .dcf-input-label {
            font-size: 0.75rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        .dcf-input-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: #00d4aa;
        }
        .dcf-input-note {
            font-size: 0.7rem;
            color: #666;
            margin-top: 4px;
        }
        .fcf-projections h5 {
            color: #b0b0b0;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .fcf-projection-table {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 12px;
        }
        .fcf-projection-item {
            text-align: center;
        }
        .fcf-projection-item.header {
            font-size: 0.75rem;
            color: #888;
            font-weight: 600;
        }
        .fcf-projection-item .year {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 2px;
        }
        .fcf-projection-item .fcf-value {
            font-size: 1rem;
            color: #e0e0e0;
            font-weight: 500;
        }
        .fcf-projection-item .growth-rate {
            font-size: 0.75rem;
            color: #00d4aa;
            margin-top: 2px;
        }
        .dcf-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .slider-group label {
            font-size: 0.95rem;
            color: #e0e0e0;
            display: flex;
            justify-content: space-between;
        }
        .slider-group label span {
            color: #00d4aa;
            font-weight: 600;
        }
        .slider-group input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
        }
        .slider-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #00d4aa;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .slider-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        .slider-hint {
            font-size: 0.8rem;
            color: #666;
        }
        .scenario-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .scenario-tab {
            padding: 10px 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: transparent;
            color: #888;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        .scenario-tab:hover {
            border-color: rgba(0, 212, 170, 0.5);
            color: #e0e0e0;
        }
        .scenario-tab.active {
            background: rgba(0, 212, 170, 0.15);
            border-color: #00d4aa;
            color: #00d4aa;
        }
        .scenario-details {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .scenario-details h4 {
            color: #00d4aa;
            margin-bottom: 15px;
        }
        .assumption-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .assumption-item {
            text-align: center;
        }
        .assumption-item .label {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 4px;
        }
        .assumption-item .value {
            font-size: 1.1rem;
            color: #e0e0e0;
            font-weight: 500;
        }
        .sensitivity-section {
            margin-bottom: 30px;
        }
        .sensitivity-section h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        .sensitivity-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            overflow: hidden;
        }
        .sensitivity-table th,
        .sensitivity-table td {
            padding: 12px 16px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .sensitivity-table th {
            background: rgba(0, 212, 170, 0.1);
            color: #00d4aa;
            font-weight: 600;
        }
        .sensitivity-table td {
            color: #e0e0e0;
        }
        .sensitivity-table td.highlight {
            background: rgba(0, 212, 170, 0.15);
            color: #00d4aa;
            font-weight: 600;
        }
        .sensitivity-table td.below-current {
            color: #ff6b6b;
        }
        .sensitivity-table td.above-current {
            color: #00d4aa;
        }
        .historical-growth {
            margin-bottom: 30px;
        }
        .historical-growth h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        .growth-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }
        .growth-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .growth-item .metric {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 6px;
        }
        .growth-item .rate {
            font-size: 1.2rem;
            font-weight: 600;
        }
        .growth-item .rate.positive { color: #00d4aa; }
        .growth-item .rate.negative { color: #ff6b6b; }
        .growth-item.selected {
            border-color: #00d4aa;
            background: rgba(0, 212, 170, 0.1);
        }
        .dcf-download {
            text-align: center;
            margin-top: 30px;
        }
        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: rgba(0, 212, 170, 0.15);
            border: 1px solid #00d4aa;
            border-radius: 8px;
            color: #00d4aa;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
        }
        .download-btn:hover {
            background: #00d4aa;
            color: #1a1a2e;
        }
        .download-icon {
            font-size: 1.2rem;
        }
        @media (max-width: 768px) {
            .charts-container { grid-template-columns: 1fr; }
            .overview-grid { grid-template-columns: 1fr; }
            .header h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>MercadoLibre (MELI)</h1>
        <p>Latin America's E-commerce & Fintech Leader | Current Price: $2,064</p>
    </div>

    <!-- Investment Overview Section -->
    <div class="overview-section">
        <button class="overview-toggle" onclick="toggleOverview()">
            <span>Investment Overview & Analysis</span>
            <span class="arrow">▼</span>
        </button>
        <div class="overview-content" id="overviewContent">
            <div class="overview-grid">
                <div class="overview-card">
                    <h3>Company Overview</h3>
                    <p>MercadoLibre is Latin America's leading e-commerce and fintech ecosystem, operating marketplace, logistics (Mercado Envios), payments (Mercado Pago), and credit services across 18 countries. Founded in 1999, the company serves over 100 million unique buyers and 72 million fintech monthly active users, with dominant positions in Brazil (51% of revenue), Mexico (22%), and Argentina (22%). The integrated commerce-fintech platform creates powerful network effects, with each business strengthening engagement in the other.</p>
                </div>

                <div class="overview-card">
                    <h3>Business Model</h3>
                    <p>Dual-engine model with Commerce (56% of revenue) driven by marketplace fees, logistics, and advertising, and Fintech (44% of revenue) from payments, credit, and digital banking. Revenue is primarily transactional with growing recurring elements from subscriptions (MELI+) and credit portfolios.</p>
                    <ul>
                        <li class="revenue-stream">
                            <span>Commerce Services (Marketplace fees, shipping, ads)</span>
                            <span class="percent trend-growing">45%</span>
                        </li>
                        <li class="revenue-stream">
                            <span>Commerce Product Sales (1P retail)</span>
                            <span class="percent trend-growing">12%</span>
                        </li>
                        <li class="revenue-stream">
                            <span>Financial Services & Income (Acquiring, asset management)</span>
                            <span class="percent trend-growing">24%</span>
                        </li>
                        <li class="revenue-stream">
                            <span>Credit Revenues (Consumer, merchant, credit cards)</span>
                            <span class="percent trend-growing">20%</span>
                        </li>
                    </ul>
                </div>

                <div class="overview-card">
                    <h3>Competitive Position</h3>
                    <p><strong>Market Position:</strong> Dominant e-commerce leader in Latin America with 21-30% market share; rapidly growing fintech challenger</p>
                    <p><strong>Main Competitors:</strong> Amazon, Shopee (Sea Limited), Nubank, Local banks, Temu, Brazilian PIX system</p>
                    <p><strong>Moat Factors:</strong></p>
                    <ul>
                        <li><strong>Network effects (Strong):</strong> 250M+ users create virtuous cycle between buyers, sellers, and fintech services</li>
                        <li><strong>Logistics infrastructure (Strong):</strong> Mercado Envios ships 95% of items with industry-leading delivery speed</li>
                        <li><strong>Ecosystem lock-in (Strong):</strong> Integration of commerce and fintech creates high switching costs</li>
                        <li><strong>Brand leadership (Strong):</strong> Record NPS levels; 55.6% share of LatAm retail media ad market</li>
                    </ul>
                </div>

                <div class="overview-card">
                    <h3>Growth Drivers</h3>
                    <ul>
                        <li>E-commerce penetration doubling opportunity: LatAm at mid-teens vs 20%+ in developed markets</li>
                        <li>Financial inclusion: Credit portfolio growth 91% YoY to $9.3B; 6 in 10 Argentinians lack credit cards</li>
                        <li>Advertising platform: Mercado Ads revenue up 63% YoY FX-neutral; Display & Video growing triple-digits</li>
                        <li>MELI+ loyalty program: Disney+, Netflix, HBO Max bundles driving principality</li>
                        <li>Logistics network expansion: New fulfillment centers improving delivery speed</li>
                        <li>Credit card maturation: Brazil cards reaching profitability (50% of portfolio profitable)</li>
                        <li>Cross-sell opportunities: 100M marketplace buyers addressable for fintech services</li>
                    </ul>
                </div>

                <div class="overview-card risks">
                    <h3>Key Risks</h3>
                    <ul>
                        <li><span class="risk-high">HIGH:</span> Intensifying competition from Shopee, Amazon, Temu (Shopee surpassed MELI in Brazil order volume)</li>
                        <li><span class="risk-high">HIGH:</span> Argentina macro instability (22% of revenue, hyperinflation, FX volatility)</li>
                        <li><span class="risk-moderate">MODERATE-HIGH:</span> Credit portfolio risk ($11.0B portfolio up 83% YoY; recession could spike delinquencies)</li>
                        <li><span class="risk-moderate">MODERATE-HIGH:</span> Free shipping margin pressure (Brazil threshold at R$19 requires volume scale)</li>
                        <li><span class="risk-moderate">MODERATE:</span> Credit card profitability timeline (immature cohorts still unprofitable)</li>
                        <li><span class="risk-moderate">MODERATE:</span> FX translation volatility (95% revenue from LatAm currencies)</li>
                    </ul>
                </div>

                <div class="overview-card bull">
                    <h3>Bull Case</h3>
                    <ul>
                        <li>LatAm e-commerce structural growth: Market to exceed $200B by 2026, growing 12.4% annually; penetration can double</li>
                        <li>Ecosystem flywheel strengthening: Commerce + fintech integration creating powerful synergies; MELI+ Mega bundle reinforcing principality</li>
                        <li>Credit business path to profitability clear: Brazil credit card 50% of portfolio now profitable; first-payment defaults at record lows</li>
                        <li>Operating leverage inflection approaching: 27 consecutive quarters 30%+ growth; logistics unit costs declining -8% QoQ</li>
                        <li>Advertising platform massive upside: 55.6% LatAm retail media share vs Amazon 17.7%; still <2% GMV penetration vs 5%+ mature platforms</li>
                        <li>Market leadership entrenched: 21-30% e-commerce market share; record NPS; consensus price target $2,770-2,874 implies 30-40% upside</li>
                    </ul>
                </div>

                <div class="overview-card bear">
                    <h3>Bear Case</h3>
                    <ul>
                        <li>Competition intensifying: Shopee surpassed MELI in Brazil order volume with $7 ASP vs MELI $21; margins permanently compressed</li>
                        <li>Credit portfolio risk underappreciated: $11.0B portfolio up 83% YoY with unseasoned cohorts; NPL could spike in recession</li>
                        <li>Argentina exposure creating persistent volatility: 22% of revenue from highly unstable macro; Q3 FX losses $102M</li>
                        <li>Free shipping strategy margin headwind: Brazil threshold at R$19 requires massive volume scale to offset</li>
                        <li>Valuation premium requires flawless execution: Q3 operating margin 9.8% vs 10.5% prior year; any stumble triggers de-rating</li>
                        <li>Leverage increasing: Net debt/EBITDA at 1.05x (up from 0.44x year ago); LatAm recession would pressure consumer spending</li>
                    </ul>
                </div>

                <div class="overview-card">
                    <h3>Recent Developments</h3>
                    <ul>
                        <li><strong>2025-Q3:</strong> Revenue +39% YoY to $7.4B, 27th consecutive quarter >30% growth; net income $421M</li>
                        <li><strong>2025-Q3:</strong> Brazil free shipping threshold reduced to R$19 driving record buyer growth (+29% YoY); items sold +42% YoY</li>
                        <li><strong>2025-Q3:</strong> Credit portfolio reached $11.0B (+83% YoY); 27M+ users; NIMAL 21.0%</li>
                        <li><strong>2025-Q3:</strong> Mercado Ads revenue accelerated to 63% YoY FX-neutral; Display & Video growing triple-digits</li>
                        <li><strong>2025-Oct:</strong> MELI+ Mega bundle launched with Disney+, Netflix, HBO Max, Apple TV+</li>
                        <li><strong>2024-FY:</strong> Full year revenue $20.8B (+38% YoY), operating income $2.6B, net income $1.9B; generated $1.3B adjusted FCF</li>
                        <li><strong>2024-Aug:</strong> Launched Mercado Pago credit card in Argentina</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- KPI Cards -->
    <div class="kpi-grid" id="kpiGrid"></div>

    <!-- Management Guidance -->
    <div class="guidance-section" id="guidanceSection">
        <div class="guidance-header">
            <h3>Management Guidance</h3>
            <span class="guidance-meta">As of <span id="guidanceAsOf"></span> | <span id="guidanceFY"></span></span>
        </div>
        <div class="guidance-grid" id="guidanceGrid"></div>
        <div class="guidance-commentary" id="guidanceCommentary"></div>
    </div>

    <!-- Charts -->
    <h2 class="section-title">Financial Performance</h2>
    <div class="charts-container" id="chartsContainer"></div>

    <!-- DCF Valuation Section -->
    <h2 class="section-title">DCF Valuation</h2>
    <div class="dcf-section">
        <div class="dcf-summary">
            <div class="dcf-card highlight">
                <div class="dcf-label">Intrinsic Value</div>
                <div class="dcf-value" id="dcfIV">$542</div>
                <div class="dcf-change" id="dcfUpside">-74% downside</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Entry Price (15% CAGR)</div>
                <div class="dcf-value" id="dcfEntry">$432</div>
                <div class="dcf-sublabel">Buy below for 15% annual return</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Current Price</div>
                <div class="dcf-value" id="dcfCurrent">$2,064</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Prob-Weighted IV</div>
                <div class="dcf-value" id="dcfWeighted">$583</div>
                <div class="dcf-sublabel">20% Bull / 50% Base / 30% Bear</div>
            </div>
        </div>

        <div class="dcf-warning" id="growthWarning">
            <span class="warning-icon">&#9888;</span>
            <span id="warningText"></span>
        </div>

        <div class="dcf-inputs">
            <h4>DCF Model Inputs</h4>
            <div class="dcf-inputs-grid">
                <div class="dcf-input-card">
                    <div class="dcf-input-label">Base Year FCF</div>
                    <div class="dcf-input-value" id="baseFCF">$1,315M</div>
                    <div class="dcf-input-note">FY2024 Adjusted FCF</div>
                </div>
                <div class="dcf-input-card">
                    <div class="dcf-input-label">Shares Outstanding</div>
                    <div class="dcf-input-value" id="sharesOut">50.7M</div>
                </div>
                <div class="dcf-input-card">
                    <div class="dcf-input-label">Net Debt</div>
                    <div class="dcf-input-value" id="netDebt">$7.3B</div>
                    <div class="dcf-input-note">Q3 2025 balance sheet</div>
                </div>
            </div>
            <div class="fcf-projections">
                <h5>Projected FCF (5-Year)</h5>
                <div class="fcf-projection-table" id="fcfProjectionTable"></div>
            </div>
        </div>

        <div class="dcf-controls">
            <div class="slider-group">
                <label>Growth Rate: <span id="growthValue">25%</span></label>
                <input type="range" id="growthSlider" min="0" max="40" value="25" step="1">
                <div class="slider-hint" id="growthHint">Based on revenue 2yr CAGR</div>
            </div>
            <div class="slider-group">
                <label>WACC: <span id="waccValue">11.0%</span></label>
                <input type="range" id="waccSlider" min="8" max="15" value="11.0" step="0.5">
            </div>
            <div class="slider-group">
                <label>Terminal Growth: <span id="terminalValue">3.5%</span></label>
                <input type="range" id="terminalSlider" min="2" max="5" value="3.5" step="0.5">
            </div>
        </div>

        <div class="scenario-tabs">
            <button class="scenario-tab active" data-scenario="base" onclick="switchScenario('base')">Base Case</button>
            <button class="scenario-tab" data-scenario="bull" onclick="switchScenario('bull')">Bull Case</button>
            <button class="scenario-tab" data-scenario="bear" onclick="switchScenario('bear')">Bear Case</button>
        </div>

        <div class="scenario-details" id="scenarioDetails">
            <div class="scenario-assumptions">
                <h4>Assumptions</h4>
                <div class="assumption-grid" id="assumptionGrid"></div>
            </div>
        </div>

        <div class="sensitivity-section">
            <h4>Sensitivity Analysis: Intrinsic Value by WACC & Terminal Growth</h4>
            <table class="sensitivity-table" id="sensitivityMatrix"></table>
        </div>

        <div class="historical-growth">
            <h4>Historical Growth Rates (CAGR)</h4>
            <div class="growth-grid" id="growthGrid"></div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle"></h3>
                <button class="modal-close" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        // EMBEDDED DATA
        const csvData = `Period,Revenue,GrossProfit,GrossMargin,OperatingIncome,OperatingMargin,EBITDA,NetIncome,NetMargin,EPS,GMV,TPV,ItemsSold,FintechMAUs,UniqueBuyers,CreditPortfolio,NIMAL,CapEx,FreeCashFlow,ShareholdersEquity,TotalDebt,CashAndEquivalents,SharesOutstanding
Q1 2022,2248,1073,47.7,139,6.2,,65,2.9,1.30,7.7,25.3,267,,81,,,,,1827,5414,1329,50.4
Q2 2022,2597,1284,49.4,250,9.6,,123,4.7,2.43,8.6,30.2,275,,84,,,,,1580,4440,1329,50.4
Q3 2022,2690,1384,51.4,296,11.0,,129,4.8,2.56,8.6,32.2,284,,88,,,,,,,1910,50.3
Q4 2022,3010,1349,44.8,349,11.6,,165,5.5,3.28,9.6,36.0,321,,97,,,,,1827,5414,1910,50.3
FY2022,10545,5090,48.3,1012,9.6,,482,4.6,9.60,34.4,123.6,1147,,148,,,,,,5414,1910,50.3
Q1 2023,3037,1536,50.6,340,11.2,,201,6.6,4.01,9.4,37.0,309,,101,,,,,2040,4832,2143,50.2
Q2 2023,3415,1831,53.6,558,16.3,,262,7.7,5.22,10.5,42.1,325,,109,,,,,,,2171,50.2
Q3 2023,3760,1995,53.1,685,18.2,,359,9.5,7.18,11.4,47.3,357,,120,,,,,2741,5240,2171,50.7
Q4 2023,4409,2050,46.5,335,7.6,470,165,3.7,3.26,13.5,44.5,413,46,141,,,180,,3071,5333,2556,50.697
FY2023,15107,7590,50.2,2207,14.6,,987,6.5,19.64,44.7,146.7,1404,46,167,,36.2,509,,3071,5333,2556,50.697
Q1 2024,4333,2024,46.7,528,12.2,682,344,7.9,6.78,11.4,40.7,385,49,147,,31.5,148,160,3390,5286,2579,50.697
Q2 2024,5073,2365,46.6,726,14.3,880,531,10.5,10.48,12.6,46.3,421,52,157,,31.1,184,,3656,5403,2818,50.697
Q3 2024,5312,2439,45.9,557,10.5,714,397,7.5,7.83,12.9,50.7,456,56,171,,24.2,223,,4002,6324,2162,50.697
Q4 2024,6059,2749,45.4,820,13.5,972,639,10.5,12.61,14.5,58.9,525,61,189,6.6,27.6,305,680,4351,6850,2635,50.697
FY2024,20777,9577,46.1,2631,12.7,,1911,9.2,37.69,51.5,196.7,1787,61,189,6.6,28.2,860,1315,4351,6850,2635,50.697
Q1 2025,5935,2771,46.7,763,12.9,935,494,8.3,9.74,13.3,58.3,492,64,199,7.8,22.7,256,-10,5004,7726,2977,50.697
Q2 2025,6790,3094,45.6,825,12.2,1024,523,7.7,10.31,15.3,64.6,550,68,211,9.3,23.0,287,454,5713,8979,3008,50.697
Q3 2025,7409,3209,43.3,724,9.8,933,421,5.7,8.32,16.5,71.2,635,72,220,11.0,21.0,357,206,6218,9877,2582,50.697
Q4 2025E,8150,3530,43.3,890,10.9,1100,580,7.1,11.44,18.0,78.0,700,76,235,12.5,22.0,380,450,6800,10500,2800,50.697
FY2025E,28284,12804,45.3,3202,11.3,3992,2019,7.1,39.81,63.1,265.3,2312,76,235,12.5,22.2,1280,1100,6800,10500,2800,50.697`;

        const analysis = {
            "ticker": "MELI",
            "company_name": "MercadoLibre, Inc.",
            "guidance": {
                "as_of": "Q3 2025 Earnings (Oct 2025)",
                "fiscal_year": "2025",
                "items": [
                    {"metric": "Revenue Growth", "target": "Continue 30%+ YoY growth trajectory", "period": "Ongoing", "vs_prior": "maintained", "notes": "27th consecutive quarter >30% YoY growth achieved in Q3'25 (39% USD, 49% FX-neutral); management confident in sustaining momentum"},
                    {"metric": "E-commerce penetration", "target": "Mid-teens penetration has potential to double", "period": "Multi-year", "vs_prior": "maintained", "notes": "LatAm e-commerce at ~15% penetration vs 20%+ in developed markets; implies market more than doubling"},
                    {"metric": "GMV Growth", "target": "Grow ahead of market", "period": "Ongoing", "vs_prior": "maintained", "notes": "Q3'25: Brazil GMV +34% YoY FX-neutral, Mexico +34%, Argentina +44%; market share gains accelerating"},
                    {"metric": "Credit Portfolio Growth", "target": "Continue rapid expansion with disciplined underwriting", "period": "Ongoing", "vs_prior": "maintained", "notes": "Portfolio reached $11.0B in Q3'25, up 83% YoY; 27M+ users; NIMAL 21.0%; first payment defaults at record lows; confident in asset quality"},
                    {"metric": "Operating Margin", "target": "Short-term pressure acceptable for long-term scale", "period": "Multi-year", "vs_prior": "maintained", "notes": "Q3'25 margin 9.8% reflects investments in free shipping, credit card, marketing; expect margin improvement as investments mature"},
                    {"metric": "Free Cash Flow", "target": "Strong cash generation after growth investments", "period": "Ongoing", "vs_prior": "maintained", "notes": "Q3'25 adjusted FCF $206M after $357M capex and $1.7B credit portfolio investment; Q2'25 $454M; full year 2024 $1.3B"},
                    {"metric": "Fintech MAU Growth", "target": "30%+ YoY growth", "period": "Ongoing", "vs_prior": "maintained", "notes": "Q3'25 reached 72M MAUs (+29% YoY), 7th consecutive quarter at/above 30% growth"},
                    {"metric": "Unique Buyers", "target": "Continue strong growth, targeting well beyond 100M", "period": "Long-term", "vs_prior": "new", "notes": "Q3'25: 77M unique buyers (trailing 12-month: 107M); Q3 Brazil added record quarterly buyers with 29% YoY growth"}
                ],
                "management_commentary": "Management emphasized: (1) 27 consecutive quarters of 30%+ revenue growth demonstrates ability to balance growth and profitability; (2) E-commerce penetration can double, market can more than double; (3) Credit card cohorts progressing to profitability as planned, 50% of Brazil portfolio now profitable; (4) Brazil free shipping threshold reduction to R$19 driving record buyer and item growth, accelerating market share gains; (5) Confident in early stages of realizing full potential with single-digit market shares in many fintech businesses; (6) Investments are long-term in nature and will drive sustainable engagement, growth and scale; (7) 'Still in early stages of realizing our full potential' and 'convinced that the best is yet to come.'"
            }
        };

        const dcfData = {
            "ticker": "MELI",
            "company_name": "MercadoLibre, Inc.",
            "valuation_date": "2026-01-23",
            "current_price": 2064.00,
            "inputs": {
                "shares_outstanding": 50.697,
                "total_debt": 9877,
                "cash": 2582,
                "net_debt": 7295,
                "last_fcf": 1315,
                "currency": "USD",
                "units": "millions"
            },
            "historical_growth": {
                "revenue_3yr_cagr": 48.9,
                "revenue_2yr_cagr": 40.1,
                "eps_3yr_cagr": 98.0,
                "eps_2yr_cagr": 98.0,
                "equity_3yr_cagr": 54.5,
                "equity_2yr_cagr": 54.5,
                "fcf_3yr_cagr": null,
                "fcf_5yr_cagr": null,
                "selected_growth_rate": 40.1,
                "growth_rate_source": "revenue_2yr_cagr",
                "growth_divergence_warning": "MELI is a hyper-growth company with exceptional 30%+ revenue growth for 27 consecutive quarters. Revenue 2yr CAGR 40.1%, EPS 98.0%, Equity 54.5%. All metrics show strong growth. Using revenue CAGR as most conservative/representative metric for projections, with gradual deceleration built into scenario assumptions."
            },
            "assumptions": {
                "base": {
                    "growth_rates": [25, 25, 18, 18, 12],
                    "fcf_margin": 6.3,
                    "wacc": 11.0,
                    "terminal_growth": 3.5
                },
                "bull": {
                    "growth_rates": [32, 32, 25, 25, 18],
                    "fcf_margin": 7.5,
                    "wacc": 10.0,
                    "terminal_growth": 4.0
                },
                "bear": {
                    "growth_rates": [15, 15, 10, 10, 6],
                    "fcf_margin": 4.5,
                    "wacc": 12.5,
                    "terminal_growth": 2.5
                }
            },
            "valuation": {
                "base": {
                    "intrinsic_value": 542.05,
                    "upside": -73.7
                },
                "bull": {
                    "intrinsic_value": 1318.05,
                    "upside": -36.1
                },
                "bear": {
                    "intrinsic_value": 163.88,
                    "upside": -92.1
                }
            },
            "entry_price": {
                "base": {
                    "entry_price": 431.81
                },
                "bull": {
                    "entry_price": 851.38
                },
                "bear": {
                    "entry_price": 159.59
                }
            },
            "sensitivity": {
                "wacc_range": [9.0, 10.0, 11.0, 12.0, 13.0],
                "terminal_growth_range": [2.5, 3.0, 3.5, 4.0, 4.5],
                "matrix": [
                    [829, 969, 1175, 1505, 2113],
                    [688, 783, 908, 1087, 1373],
                    [589, 657, 745, 860, 1025],
                    [516, 568, 633, 716, 827],
                    [459, 500, 550, 612, 694]
                ]
            },
            "probability_weighted": {
                "weights": {
                    "bull": 0.20,
                    "base": 0.50,
                    "bear": 0.30
                },
                "weighted_iv": 583.38
            }
        };

        // Parse CSV
        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const headers = lines[0].split(',');
            return lines.slice(1).map(line => {
                const values = line.split(',');
                const obj = {};
                headers.forEach((h, i) => obj[h.trim()] = values[i]?.trim());
                return obj;
            });
        }

        const data = parseCSV(csvData);

        // Sort chronologically
        data.sort((a, b) => {
            const parseDate = (p) => {
                const year = parseInt(p.match(/\d{4}/)?.[0] || '0');
                const isQ1 = p.includes('Q1');
                const isQ2 = p.includes('Q2');
                const isQ3 = p.includes('Q3');
                const isQ4 = p.includes('Q4');
                const isFY = p.startsWith('FY');
                const subOrder = isQ1 ? 1 : isQ2 ? 2 : isQ3 ? 4 : isQ4 ? 5 : isFY ? 7 : 0;
                return year * 10 + subOrder;
            };
            return parseDate(a.Period) - parseDate(b.Period);
        });

        // Filter quarterly data (exclude FY)
        const qData = data.filter(d => !d.Period.startsWith('FY'));
        const fyData = data.filter(d => d.Period.startsWith('FY'));

        // Toggle overview
        function toggleOverview() {
            const btn = document.querySelector('.overview-toggle');
            const content = document.getElementById('overviewContent');
            btn.classList.toggle('active');
            content.classList.toggle('active');
        }

        // Format numbers
        function formatNum(n, decimals = 1) {
            if (!n || n === '') return 'N/A';
            const num = parseFloat(n);
            if (Math.abs(num) >= 1000) return '$' + (num/1000).toFixed(decimals) + 'B';
            return '$' + num.toFixed(0) + 'M';
        }

        function formatPercent(n) {
            if (!n || n === '') return 'N/A';
            return parseFloat(n).toFixed(1) + '%';
        }

        // YoY calculation
        function calcYoYChange(current, previous) {
            if (!previous || !current || previous === '' || current === '') return null;
            return ((parseFloat(current) - parseFloat(previous)) / Math.abs(parseFloat(previous)) * 100).toFixed(1);
        }

        // Render KPIs
        function renderKPIs() {
            const latest = fyData[fyData.length - 1];
            const prior = fyData[fyData.length - 2];

            const kpis = [
                {label: 'Revenue', value: formatNum(latest.Revenue), change: calcYoYChange(latest.Revenue, prior.Revenue)},
                {label: 'Operating Income', value: formatNum(latest.OperatingIncome), change: calcYoYChange(latest.OperatingIncome, prior.OperatingIncome)},
                {label: 'Net Income', value: formatNum(latest.NetIncome), change: calcYoYChange(latest.NetIncome, prior.NetIncome)},
                {label: 'GMV', value: formatNum(latest.GMV), change: calcYoYChange(latest.GMV, prior.GMV)},
                {label: 'TPV', value: formatNum(latest.TPV), change: calcYoYChange(latest.TPV, prior.TPV)},
                {label: 'Credit Portfolio', value: formatNum(latest.CreditPortfolio), change: calcYoYChange(latest.CreditPortfolio, prior.CreditPortfolio)},
                {label: 'Fintech MAUs', value: latest.FintechMAUs + 'M', change: calcYoYChange(latest.FintechMAUs, prior.FintechMAUs)},
                {label: 'Items Sold', value: latest.ItemsSold + 'M', change: calcYoYChange(latest.ItemsSold, prior.ItemsSold)}
            ];

            const grid = document.getElementById('kpiGrid');
            grid.innerHTML = kpis.map(kpi => {
                const changeClass = kpi.change && parseFloat(kpi.change) >= 0 ? 'positive' : 'negative';
                const changeText = kpi.change ? `${kpi.change >= 0 ? '+' : ''}${kpi.change}% YoY` : '';
                return `
                    <div class="kpi-card">
                        <div class="kpi-value">${kpi.value}</div>
                        <div class="kpi-label">${kpi.label}</div>
                        ${changeText ? `<div class="kpi-change ${changeClass}">${changeText}</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        // Render guidance
        function renderGuidance() {
            if (!analysis.guidance || !analysis.guidance.items || analysis.guidance.items.length === 0) {
                document.getElementById('guidanceSection').style.display = 'none';
                return;
            }

            const guidance = analysis.guidance;
            document.getElementById('guidanceAsOf').textContent = guidance.as_of || '';
            document.getElementById('guidanceFY').textContent = guidance.fiscal_year || '';

            const grid = document.getElementById('guidanceGrid');
            grid.innerHTML = guidance.items.map(item => {
                const vsClass = item.vs_prior ? item.vs_prior.toLowerCase() : 'new';
                const vsLabel = item.vs_prior ? item.vs_prior.charAt(0).toUpperCase() + item.vs_prior.slice(1) : 'New';
                return `
                    <div class="guidance-card">
                        <div class="guidance-metric">${item.metric}</div>
                        <div class="guidance-target">${item.target}</div>
                        <div class="guidance-period">${item.period}</div>
                        <span class="guidance-vs-prior ${vsClass}">${vsLabel}</span>
                        ${item.notes ? `<div class="guidance-notes">${item.notes}</div>` : ''}
                    </div>
                `;
            }).join('');

            const commentary = document.getElementById('guidanceCommentary');
            if (guidance.management_commentary) {
                commentary.textContent = guidance.management_commentary;
                commentary.style.display = 'block';
            } else {
                commentary.style.display = 'none';
            }
        }

        // Chart defaults
        const chartDefaults = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { labels: { color: '#e0e0e0', font: { size: 11 } } }
            },
            scales: {
                x: { ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,0.05)' } },
                y: { ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,0.05)' } }
            }
        };

        const colors = {
            primary: '#00d4aa',
            secondary: '#00b894',
            tertiary: '#0984e3',
            quaternary: '#6c5ce7',
            warning: '#fdcb6e',
            danger: '#ff6b6b'
        };

        // Render charts
        function renderCharts() {
            const container = document.getElementById('chartsContainer');
            const periods = qData.map(d => d.Period.replace('E', '(E)'));

            const charts = [
                {
                    title: 'Revenue & Operating Margin',
                    help: 'revenue',
                    config: {
                        type: 'bar',
                        data: {
                            labels: periods,
                            datasets: [
                                {
                                    label: 'Revenue ($M)',
                                    data: qData.map(d => parseFloat(d.Revenue)),
                                    backgroundColor: colors.primary,
                                    yAxisID: 'y'
                                },
                                {
                                    label: 'Operating Margin (%)',
                                    data: qData.map(d => parseFloat(d.OperatingMargin)),
                                    type: 'line',
                                    borderColor: colors.warning,
                                    backgroundColor: 'transparent',
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            ...chartDefaults,
                            scales: {
                                ...chartDefaults.scales,
                                y: { ...chartDefaults.scales.y, position: 'left', title: { display: true, text: 'Revenue ($M)', color: '#888' } },
                                y1: { ...chartDefaults.scales.y, position: 'right', grid: { display: false }, title: { display: true, text: 'Margin (%)', color: '#888' } }
                            }
                        }
                    }
                },
                {
                    title: 'GMV & Items Sold',
                    help: 'gmv',
                    config: {
                        type: 'line',
                        data: {
                            labels: periods,
                            datasets: [
                                {
                                    label: 'GMV ($B)',
                                    data: qData.map(d => parseFloat(d.GMV)),
                                    borderColor: colors.primary,
                                    backgroundColor: 'transparent',
                                    yAxisID: 'y'
                                },
                                {
                                    label: 'Items Sold (M)',
                                    data: qData.map(d => parseFloat(d.ItemsSold)),
                                    borderColor: colors.secondary,
                                    backgroundColor: 'transparent',
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            ...chartDefaults,
                            scales: {
                                ...chartDefaults.scales,
                                y: { ...chartDefaults.scales.y, position: 'left', title: { display: true, text: 'GMV ($B)', color: '#888' } },
                                y1: { ...chartDefaults.scales.y, position: 'right', grid: { display: false }, title: { display: true, text: 'Items (M)', color: '#888' } }
                            }
                        }
                    }
                },
                {
                    title: 'TPV & Fintech MAUs',
                    help: 'tpv',
                    config: {
                        type: 'line',
                        data: {
                            labels: periods,
                            datasets: [
                                {
                                    label: 'TPV ($B)',
                                    data: qData.map(d => parseFloat(d.TPV)),
                                    borderColor: colors.tertiary,
                                    backgroundColor: 'transparent',
                                    yAxisID: 'y'
                                },
                                {
                                    label: 'Fintech MAUs (M)',
                                    data: qData.map(d => parseFloat(d.FintechMAUs) || null),
                                    borderColor: colors.quaternary,
                                    backgroundColor: 'transparent',
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            ...chartDefaults,
                            scales: {
                                ...chartDefaults.scales,
                                y: { ...chartDefaults.scales.y, position: 'left', title: { display: true, text: 'TPV ($B)', color: '#888' } },
                                y1: { ...chartDefaults.scales.y, position: 'right', grid: { display: false }, title: { display: true, text: 'MAUs (M)', color: '#888' } }
                            }
                        }
                    }
                },
                {
                    title: 'Credit Portfolio & NIMAL',
                    help: 'credit',
                    config: {
                        type: 'bar',
                        data: {
                            labels: periods,
                            datasets: [
                                {
                                    label: 'Credit Portfolio ($B)',
                                    data: qData.map(d => parseFloat(d.CreditPortfolio) || null),
                                    backgroundColor: colors.primary,
                                    yAxisID: 'y'
                                },
                                {
                                    label: 'NIMAL (%)',
                                    data: qData.map(d => parseFloat(d.NIMAL) || null),
                                    type: 'line',
                                    borderColor: colors.warning,
                                    backgroundColor: 'transparent',
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            ...chartDefaults,
                            scales: {
                                ...chartDefaults.scales,
                                y: { ...chartDefaults.scales.y, position: 'left', title: { display: true, text: 'Portfolio ($B)', color: '#888' } },
                                y1: { ...chartDefaults.scales.y, position: 'right', grid: { display: false }, title: { display: true, text: 'NIMAL (%)', color: '#888' } }
                            }
                        }
                    }
                },
                {
                    title: 'Profitability Trends',
                    help: 'profitability',
                    config: {
                        type: 'line',
                        data: {
                            labels: periods,
                            datasets: [
                                {
                                    label: 'Gross Margin (%)',
                                    data: qData.map(d => parseFloat(d.GrossMargin)),
                                    borderColor: colors.primary,
                                    backgroundColor: 'transparent'
                                },
                                {
                                    label: 'Operating Margin (%)',
                                    data: qData.map(d => parseFloat(d.OperatingMargin)),
                                    borderColor: colors.tertiary,
                                    backgroundColor: 'transparent'
                                },
                                {
                                    label: 'Net Margin (%)',
                                    data: qData.map(d => parseFloat(d.NetMargin)),
                                    borderColor: colors.secondary,
                                    backgroundColor: 'transparent'
                                }
                            ]
                        },
                        options: chartDefaults
                    }
                },
                {
                    title: 'Free Cash Flow & CapEx',
                    help: 'fcf',
                    config: {
                        type: 'bar',
                        data: {
                            labels: periods,
                            datasets: [
                                {
                                    label: 'Free Cash Flow ($M)',
                                    data: qData.map(d => parseFloat(d.FreeCashFlow) || null),
                                    backgroundColor: colors.primary
                                },
                                {
                                    label: 'CapEx ($M)',
                                    data: qData.map(d => parseFloat(d.CapEx) || null),
                                    backgroundColor: colors.danger
                                }
                            ]
                        },
                        options: chartDefaults
                    }
                }
            ];

            container.innerHTML = charts.map((chart, i) => `
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>${chart.title}</h3>
                        <button class="help-btn" onclick="openModal('${chart.help}')">?</button>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="chart${i}"></canvas>
                    </div>
                </div>
            `).join('');

            charts.forEach((chart, i) => {
                new Chart(document.getElementById(`chart${i}`), chart.config);
            });
        }

        // Metric descriptions
        const metricDescriptions = {
            revenue: {
                title: "Revenue",
                content: `
                    <p><strong>Revenue</strong> is the total income from MercadoLibre's marketplace, logistics, payments, and credit businesses.</p>
                    <div class="metric-highlight">
                        <strong>For MELI:</strong> Revenue comes from four streams: Commerce Services (45%, marketplace fees, shipping, ads), Commerce Product Sales (12%, 1P retail), Financial Services (24%, acquiring, asset management), and Credit Revenues (20%, consumer/merchant loans, credit cards).
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li>27 consecutive quarters of 30%+ YoY growth (Q3'25: 39% USD, 49% FX-neutral)</li>
                        <li>FY2025E revenue $28.3B (+36% YoY) demonstrates sustained momentum</li>
                        <li>Credit revenue growing fastest as portfolio scales; advertising accelerating (63% YoY)</li>
                        <li>Brazil 51%, Mexico 22%, Argentina 22% of revenue; FX translation impacts reported growth</li>
                    </ul>
                `
            },
            gmv: {
                title: "GMV & Items Sold",
                content: `
                    <p><strong>GMV (Gross Merchandise Value)</strong> is the total dollar value of items sold on the marketplace. <strong>Items Sold</strong> is the total unit volume.</p>
                    <div class="metric-highlight">
                        <strong>For MELI:</strong> GMV and items are the lifeblood of the ecosystem. Higher volume drives marketplace fees, logistics revenue, payment processing, and creates opportunities for credit products. FY2025E GMV $63.1B (+23% YoY), items 2,312M (+29% YoY).
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li>Brazil free shipping threshold reduced to R$19 drove record Q3'25 buyer growth (+29% YoY); items +42% YoY</li>
                        <li>Items growing faster than GMV indicates lower ASP from free shipping strategy (frequency over ticket size)</li>
                        <li>Competition from Shopee ($7 ASP) and Temu; MELI maintaining ~$21 ASP</li>
                        <li>100M+ unique buyers (trailing 12-month) provide massive cross-sell opportunity for fintech</li>
                    </ul>
                `
            },
            tpv: {
                title: "TPV & Fintech MAUs",
                content: `
                    <p><strong>TPV (Total Payment Volume)</strong> is the total value of transactions processed through Mercado Pago. <strong>Fintech MAUs</strong> are monthly active users of fintech services.</p>
                    <div class="metric-highlight">
                        <strong>For MELI:</strong> TPV and MAUs show fintech adoption beyond marketplace. FY2025E TPV $265.3B (+35% YoY) vs GMV $63.1B means Mercado Pago is used for 4.2x the value of marketplace GMV (includes off-platform payments, credit card spend, P2P). Fintech MAUs 76M (+25% YoY) with record NPS.
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li>TPV growing faster than GMV shows off-marketplace traction (credit cards, QR payments, wallets)</li>
                        <li>72M MAUs (Q3'25) vs 220M unique marketplace buyers shows cross-sell potential</li>
                        <li>7th consecutive quarter of 30%+ MAU growth demonstrates fintech momentum</li>
                        <li>Brazil PIX system (zero cost P2P) is competitive threat but MELI integrating it</li>
                    </ul>
                `
            },
            credit: {
                title: "Credit Portfolio & NIMAL",
                content: `
                    <p><strong>Credit Portfolio</strong> is the total outstanding loan balance. <strong>NIMAL (Net Interest Margin After Losses)</strong> measures credit profitability after defaults.</p>
                    <div class="metric-highlight">
                        <strong>For MELI:</strong> Credit is fastest-growing segment. Portfolio $11.0B (Q3'25, +83% YoY), serving 27M+ users. NIMAL compressed to 21.0% (Q3'25) from higher Argentina funding costs and credit card mix shift (cards less profitable initially but drive GMV uplifts).
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li>50% of Brazil credit card portfolio now profitable; Argentina card launched Aug 2024</li>
                        <li>First-payment defaults at record lows; NPL 15-90 at 6.8% (manageable but watch in recession)</li>
                        <li>Provisions now 12% of revenue vs historical 6-8% due to rapid growth and card mix</li>
                        <li>Target NIMAL of 21-23% is solid for LatAm unsecured lending; watch for deceleration/stability</li>
                        <li>6 in 10 Argentinians lack credit cards; massive financial inclusion TAM</li>
                    </ul>
                `
            },
            profitability: {
                title: "Profitability Trends",
                content: `
                    <p>Profitability margins show the company's ability to convert revenue into profit at each stage of the income statement.</p>
                    <div class="metric-highlight">
                        <strong>For MELI:</strong> Gross margin ~45% (Q3'25: 43.3%, pressured by 1P retail and free shipping). Operating margin 9.8% (Q3'25) vs 10.5% prior year due to investments in free shipping, credit cards, marketing. Net margin 5.7% (Q3'25) vs 7.5% prior year from Argentina FX losses ($102M).
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li>Operating margin varied from 9.8% (Q3'25) to 18.2% (Q3'23); quarterly volatility from investment timing</li>
                        <li>Management says short-term margin pressure acceptable for long-term scale; expects improvement as investments mature</li>
                        <li>Competition from Shopee/Temu could force permanent margin compression if pricing pressure intensifies</li>
                        <li>G&A and product development diluting 4-5ppts YoY shows operating leverage potential</li>
                    </ul>
                `
            },
            fcf: {
                title: "Free Cash Flow & CapEx",
                content: `
                    <p><strong>Free Cash Flow</strong> is cash from operations minus capital expenditures. <strong>CapEx</strong> is investment in logistics infrastructure (fulfillment centers, technology).</p>
                    <div class="metric-highlight">
                        <strong>For MELI:</strong> FY2024 generated $1.3B adjusted FCF (first year of significant FCF generation). Q3'25 adjusted FCF $206M after $357M capex and $1.7B credit portfolio investment. FY2025E FCF ~$1.1B.
                    </div>
                    <p><strong>What to watch:</strong></p>
                    <ul>
                        <li>FCF lower in 2025 vs 2024 due to accelerated credit portfolio growth (investment, not loss)</li>
                        <li>CapEx ramping for logistics expansion (fulfillment centers, Metro facilities)</li>
                        <li>Credit portfolio growth requires balance sheet investment but generates recurring credit revenue</li>
                        <li>Demonstrates ability to self-fund growth while expanding aggressively</li>
                    </ul>
                `
            }
        };

        // Modal functions
        function openModal(key) {
            document.getElementById('modalTitle').textContent = metricDescriptions[key].title;
            document.getElementById('modalBody').innerHTML = metricDescriptions[key].content;
            document.getElementById('modalOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event && event.target !== document.getElementById('modalOverlay')) return;
            document.getElementById('modalOverlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

        // DCF Functions
        let currentScenario = 'base';

        function initDCF() {
            if (!dcfData || !dcfData.valuation) return;

            document.getElementById('dcfCurrent').textContent = '$' + dcfData.current_price.toFixed(0);

            if (dcfData.historical_growth.growth_divergence_warning) {
                document.getElementById('growthWarning').style.display = 'flex';
                document.getElementById('warningText').textContent = dcfData.historical_growth.growth_divergence_warning;
            }

            const base = dcfData.assumptions.base;
            document.getElementById('growthSlider').value = base.growth_rates[0];
            document.getElementById('waccSlider').value = base.wacc;
            document.getElementById('terminalSlider').value = base.terminal_growth;

            document.getElementById('growthValue').textContent = base.growth_rates[0] + '%';
            document.getElementById('waccValue').textContent = base.wacc + '%';
            document.getElementById('terminalValue').textContent = base.terminal_growth + '%';

            document.getElementById('growthHint').textContent = 'Based on ' + dcfData.historical_growth.growth_rate_source.replace(/_/g, ' ');

            renderDCFInputs();
            renderHistoricalGrowth();
            renderSensitivityMatrix();
            updateDCFDisplay();
            switchScenario('base');
        }

        function renderDCFInputs() {
            const inputs = dcfData.inputs;
            document.getElementById('baseFCF').textContent = '$' + inputs.last_fcf + 'M';
            document.getElementById('sharesOut').textContent = inputs.shares_outstanding.toFixed(1) + 'M';
            const netDebtEl = document.getElementById('netDebt');
            netDebtEl.textContent = '$' + (inputs.net_debt/1000).toFixed(1) + 'B';
            renderFCFProjections();
        }

        function renderFCFProjections() {
            const growth = parseFloat(document.getElementById('growthSlider')?.value || dcfData.assumptions[currentScenario].growth_rates[0]);
            const baseFCF = dcfData.inputs.last_fcf;
            const growthRates = dcfData.assumptions[currentScenario]?.growth_rates || [growth, growth, growth, growth, growth];

            let html = `
                <div class="fcf-projection-item header">Base</div>
                <div class="fcf-projection-item header">Year 1</div>
                <div class="fcf-projection-item header">Year 2</div>
                <div class="fcf-projection-item header">Year 3</div>
                <div class="fcf-projection-item header">Year 4</div>
                <div class="fcf-projection-item header">Year 5</div>
            `;

            let fcf = baseFCF;
            const fcfValues = [baseFCF];
            for (let i = 0; i < 5; i++) {
                fcf = fcf * (1 + growthRates[i] / 100);
                fcfValues.push(fcf);
            }

            html += `<div class="fcf-projection-item">
                <div class="fcf-value">$${fcfValues[0].toFixed(0)}M</div>
                <div class="growth-rate">-</div>
            </div>`;

            for (let i = 1; i <= 5; i++) {
                html += `<div class="fcf-projection-item">
                    <div class="fcf-value">$${fcfValues[i].toFixed(0)}M</div>
                    <div class="growth-rate">+${growthRates[i-1]}%</div>
                </div>`;
            }

            document.getElementById('fcfProjectionTable').innerHTML = html;
        }

        function calculateDCF(growthRate, wacc, terminalGrowth) {
            const years = 5;
            const fcf = dcfData.inputs.last_fcf;
            let pvFCF = 0;
            let projectedFCF = fcf;

            for (let i = 0; i < years; i++) {
                projectedFCF *= (1 + growthRate / 100);
                pvFCF += projectedFCF / Math.pow(1 + wacc/100, i + 1);
            }

            const terminalFCF = projectedFCF * (1 + terminalGrowth/100);
            const terminalValue = terminalFCF / (wacc/100 - terminalGrowth/100);
            const pvTerminal = terminalValue / Math.pow(1 + wacc/100, years);

            const enterpriseValue = pvFCF + pvTerminal;
            const equityValue = enterpriseValue - dcfData.inputs.net_debt;
            const iv = equityValue / dcfData.inputs.shares_outstanding;

            const terminalPerShare = terminalValue / dcfData.inputs.shares_outstanding;
            const entryPrice = terminalPerShare / Math.pow(1.15, years);

            return {iv: iv, entryPrice: entryPrice};
        }

        window.updateDCFDisplay = function() {
            const growth = parseFloat(document.getElementById('growthSlider').value);
            const wacc = parseFloat(document.getElementById('waccSlider').value);
            const terminal = parseFloat(document.getElementById('terminalSlider').value);

            document.getElementById('growthValue').textContent = growth + '%';
            document.getElementById('waccValue').textContent = wacc + '%';
            document.getElementById('terminalValue').textContent = terminal + '%';

            const result = calculateDCF(growth, wacc, terminal);

            document.getElementById('dcfIV').textContent = '$' + result.iv.toFixed(0);
            document.getElementById('dcfEntry').textContent = '$' + result.entryPrice.toFixed(0);

            const upside = ((result.iv - dcfData.current_price) / dcfData.current_price * 100);
            const upsideEl = document.getElementById('dcfUpside');
            upsideEl.textContent = (upside >= 0 ? '+' : '') + upside.toFixed(0) + '% ' + (upside >= 0 ? 'upside' : 'downside');
            upsideEl.className = 'dcf-change ' + (upside >= 0 ? 'positive' : 'negative');

            document.getElementById('dcfWeighted').textContent = '$' + dcfData.probability_weighted.weighted_iv.toFixed(0);

            const grid = document.getElementById('assumptionGrid');
            if (grid) {
                grid.innerHTML = `
                    <div class="assumption-item">
                        <div class="label">Growth Rate</div>
                        <div class="value">${growth}%</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">WACC</div>
                        <div class="value">${wacc}%</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">Terminal Growth</div>
                        <div class="value">${terminal}%</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">Intrinsic Value</div>
                        <div class="value" style="color: #00d4aa;">$${result.iv.toFixed(0)}</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">Entry Price</div>
                        <div class="value" style="color: #00d4aa;">$${result.entryPrice.toFixed(0)}</div>
                    </div>
                `;
            }
        };

        window.switchScenario = function(scenario) {
            currentScenario = scenario;

            document.querySelectorAll('.scenario-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.scenario === scenario);
            });

            const assumptions = dcfData.assumptions[scenario];
            const valuation = dcfData.valuation[scenario];

            renderFCFProjections();

            document.getElementById('growthSlider').value = assumptions.growth_rates[0];
            document.getElementById('waccSlider').value = assumptions.wacc;
            document.getElementById('terminalSlider').value = assumptions.terminal_growth;

            const grid = document.getElementById('assumptionGrid');
            grid.innerHTML = `
                <div class="assumption-item">
                    <div class="label">Year 1 Growth</div>
                    <div class="value">${assumptions.growth_rates[0]}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Year 5 Growth</div>
                    <div class="value">${assumptions.growth_rates[4]}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">FCF Margin</div>
                    <div class="value">${assumptions.fcf_margin}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">WACC</div>
                    <div class="value">${assumptions.wacc}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Terminal Growth</div>
                    <div class="value">${assumptions.terminal_growth}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Intrinsic Value</div>
                    <div class="value" style="color: #00d4aa;">$${valuation.intrinsic_value.toFixed(0)}</div>
                </div>
            `;

            updateDCFDisplay();
        };

        function renderHistoricalGrowth() {
            const growth = dcfData.historical_growth;
            const selectedSource = growth.growth_rate_source;
            const grid = document.getElementById('growthGrid');

            const metrics = [
                { key: 'revenue_2yr_cagr', label: 'Revenue 2Y' },
                { key: 'revenue_3yr_cagr', label: 'Revenue 3Y' },
                { key: 'eps_2yr_cagr', label: 'EPS 2Y' },
                { key: 'eps_3yr_cagr', label: 'EPS 3Y' },
                { key: 'equity_2yr_cagr', label: 'Equity 2Y' },
                { key: 'equity_3yr_cagr', label: 'Equity 3Y' }
            ];

            grid.innerHTML = metrics.map(m => {
                const rate = growth[m.key];
                if (rate === null) return '';
                const isSelected = m.key === selectedSource;
                const colorClass = rate >= 0 ? 'positive' : 'negative';
                return `
                    <div class="growth-item ${isSelected ? 'selected' : ''}">
                        <div class="metric">${m.label}</div>
                        <div class="rate ${colorClass}">${rate >= 0 ? '+' : ''}${rate.toFixed(1)}%</div>
                    </div>
                `;
            }).join('');
        }

        function renderSensitivityMatrix() {
            const sens = dcfData.sensitivity;
            const table = document.getElementById('sensitivityMatrix');
            const currentPrice = dcfData.current_price;

            let html = '<tr><th>WACC \\ Term G</th>';
            sens.terminal_growth_range.forEach(tg => {
                html += `<th>${tg}%</th>`;
            });
            html += '</tr>';

            sens.wacc_range.forEach((wacc, i) => {
                html += `<tr><th>${wacc}%</th>`;
                sens.matrix[i].forEach((val, j) => {
                    const isHighlight = wacc === dcfData.assumptions.base.wacc &&
                                       sens.terminal_growth_range[j] === dcfData.assumptions.base.terminal_growth;
                    const colorClass = val >= currentPrice ? 'above-current' : 'below-current';
                    html += `<td class="${isHighlight ? 'highlight' : colorClass}">$${val}</td>`;
                });
                html += '</tr>';
            });

            table.innerHTML = html;
        }

        // Initialize
        renderKPIs();
        renderGuidance();
        renderCharts();
        initDCF();

        // Bind slider events
        (function() {
            var growthSlider = document.getElementById('growthSlider');
            var waccSlider = document.getElementById('waccSlider');
            var terminalSlider = document.getElementById('terminalSlider');

            if (growthSlider) {
                growthSlider.oninput = window.updateDCFDisplay;
                growthSlider.onchange = window.updateDCFDisplay;
            }
            if (waccSlider) {
                waccSlider.oninput = window.updateDCFDisplay;
                waccSlider.onchange = window.updateDCFDisplay;
            }
            if (terminalSlider) {
                terminalSlider.oninput = window.updateDCFDisplay;
                terminalSlider.onchange = window.updateDCFDisplay;
            }
        })();
    </script>
</body>
</html>
