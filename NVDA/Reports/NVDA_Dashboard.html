<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NVIDIA Corporation (NVDA) Financial Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #76b900, #00d4aa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .header p {
            color: #888;
            font-size: 1.1rem;
        }
        /* Investment Overview Section */
        .overview-section {
            max-width: 1400px;
            margin: 0 auto 30px;
        }
        .overview-toggle {
            width: 100%;
            background: rgba(118, 185, 0, 0.1);
            border: 1px solid rgba(118, 185, 0, 0.3);
            border-radius: 12px;
            padding: 16px 24px;
            color: #76b900;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }
        .overview-toggle:hover {
            background: rgba(118, 185, 0, 0.2);
        }
        .overview-toggle .arrow {
            transition: transform 0.3s ease;
        }
        .overview-toggle.active .arrow {
            transform: rotate(180deg);
        }
        .overview-content {
            display: none;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: none;
            border-radius: 0 0 12px 12px;
            padding: 30px;
            margin-top: -12px;
        }
        .overview-content.active {
            display: block;
        }
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }
        .overview-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .overview-card h3 {
            color: #76b900;
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .overview-card p {
            margin-bottom: 12px;
            line-height: 1.6;
        }
        .overview-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .overview-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            line-height: 1.5;
        }
        .overview-card li:last-child {
            border-bottom: none;
        }
        .overview-card.bull h3 { color: #00d4aa; }
        .overview-card.bear h3 { color: #ff6b6b; }
        .overview-card.risks h3 { color: #fdcb6e; }
        .risk-high { color: #ff6b6b; }
        .risk-moderate { color: #fdcb6e; }
        .risk-low { color: #00d4aa; }
        .revenue-stream {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .revenue-stream .percent {
            color: #76b900;
            font-weight: 600;
        }
        .trend-growing { color: #00d4aa; }
        .trend-stable { color: #888; }
        .trend-declining { color: #ff6b6b; }
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }
        .kpi-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(118, 185, 0, 0.2);
        }
        .kpi-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #76b900;
            margin-bottom: 5px;
        }
        .kpi-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .kpi-change {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .kpi-change.positive { color: #00d4aa; }
        .kpi-change.negative { color: #ff6b6b; }
        /* Guidance Section */
        .guidance-section {
            max-width: 1400px;
            margin: 0 auto 30px;
        }
        .guidance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .guidance-header h3 {
            color: #fff;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .guidance-header h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #76b900, #00d4aa);
            border-radius: 2px;
        }
        .guidance-meta {
            font-size: 0.85rem;
            color: #888;
        }
        .guidance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .guidance-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 18px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.2s ease;
        }
        .guidance-card:hover {
            transform: translateY(-2px);
        }
        .guidance-metric {
            font-size: 0.8rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        .guidance-target {
            font-size: 1.4rem;
            font-weight: 600;
            color: #76b900;
            margin-bottom: 6px;
        }
        .guidance-period {
            font-size: 0.85rem;
            color: #e0e0e0;
            margin-bottom: 8px;
        }
        .guidance-vs-prior {
            display: inline-block;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 500;
        }
        .guidance-vs-prior.raised {
            background: rgba(0, 212, 170, 0.15);
            color: #00d4aa;
        }
        .guidance-vs-prior.lowered {
            background: rgba(255, 107, 107, 0.15);
            color: #ff6b6b;
        }
        .guidance-vs-prior.maintained {
            background: rgba(255, 255, 255, 0.1);
            color: #888;
        }
        .guidance-vs-prior.new {
            background: rgba(99, 102, 241, 0.15);
            color: #818cf8;
        }
        .guidance-notes {
            font-size: 0.8rem;
            color: #666;
            margin-top: 8px;
            line-height: 1.4;
        }
        .guidance-commentary {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            padding: 16px 20px;
            border-left: 3px solid #76b900;
            font-style: italic;
            color: #b0b0b0;
            line-height: 1.6;
        }
        .guidance-commentary::before {
            content: '"';
            font-size: 1.5rem;
            color: #76b900;
            margin-right: 4px;
        }
        .section-title {
            font-size: 1.5rem;
            color: #fff;
            margin: 40px auto 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(118, 185, 0, 0.3);
            max-width: 1400px;
        }
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .chart-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .chart-header h3 {
            color: #fff;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .chart-header h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #76b900, #00d4aa);
            border-radius: 2px;
        }
        .help-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(118, 185, 0, 0.2);
            border: 1px solid #76b900;
            color: #76b900;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        .help-btn:hover {
            background: #76b900;
            color: #1a1a2e;
        }
        .chart-wrapper {
            position: relative;
            height: 300px;
        }
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: linear-gradient(135deg, #1e2a4a 0%, #16213e 100%);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(118, 185, 0, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-header h3 {
            color: #76b900;
            font-size: 1.4rem;
            margin: 0;
        }
        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            background: #ff6b6b;
            color: #fff;
        }
        .modal-body {
            padding: 25px;
            line-height: 1.7;
        }
        .modal-body p { margin-bottom: 15px; }
        .modal-body strong { color: #76b900; }
        .modal-body ul { margin: 15px 0; padding-left: 20px; }
        .modal-body li { margin-bottom: 8px; }
        .metric-highlight {
            background: rgba(118, 185, 0, 0.1);
            border-left: 3px solid #76b900;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        /* DCF Valuation Section */
        .dcf-section {
            max-width: 1400px;
            margin: 0 auto 40px;
        }
        .dcf-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .dcf-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }
        .dcf-card:hover {
            transform: translateY(-3px);
        }
        .dcf-card.highlight {
            background: rgba(118, 185, 0, 0.1);
            border-color: rgba(118, 185, 0, 0.3);
        }
        .dcf-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        .dcf-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #76b900;
        }
        .dcf-card:not(.highlight) .dcf-value {
            color: #fff;
        }
        .dcf-change {
            font-size: 1rem;
            margin-top: 8px;
            font-weight: 600;
        }
        .dcf-change.positive { color: #00d4aa; }
        .dcf-change.negative { color: #ff6b6b; }
        .dcf-sublabel {
            font-size: 0.8rem;
            color: #666;
            margin-top: 8px;
        }
        .dcf-warning {
            background: rgba(253, 203, 110, 0.15);
            border: 1px solid rgba(253, 203, 110, 0.4);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fdcb6e;
        }
        .warning-icon {
            font-size: 1.2rem;
        }
        .dcf-inputs {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .dcf-inputs h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
            font-size: 1rem;
        }
        .dcf-inputs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .dcf-input-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .dcf-input-label {
            font-size: 0.75rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        .dcf-input-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: #76b900;
        }
        .dcf-input-note {
            font-size: 0.7rem;
            color: #666;
            margin-top: 4px;
        }
        .fcf-projections h5 {
            color: #b0b0b0;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .fcf-projection-table {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 12px;
        }
        .fcf-projection-item {
            text-align: center;
        }
        .fcf-projection-item.header {
            font-size: 0.75rem;
            color: #888;
            font-weight: 600;
        }
        .fcf-projection-item .year {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 2px;
        }
        .fcf-projection-item .fcf-value {
            font-size: 1rem;
            color: #e0e0e0;
            font-weight: 500;
        }
        .fcf-projection-item .growth-rate {
            font-size: 0.75rem;
            color: #76b900;
            margin-top: 2px;
        }
        .dcf-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .slider-group label {
            font-size: 0.95rem;
            color: #e0e0e0;
            display: flex;
            justify-content: space-between;
        }
        .slider-group label span {
            color: #76b900;
            font-weight: 600;
        }
        .slider-group input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
        }
        .slider-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #76b900;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .slider-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        .slider-group input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #76b900;
            cursor: pointer;
            border: none;
        }
        .slider-hint {
            font-size: 0.8rem;
            color: #666;
        }
        .scenario-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .scenario-tab {
            padding: 10px 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: transparent;
            color: #888;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        .scenario-tab:hover {
            border-color: rgba(118, 185, 0, 0.5);
            color: #e0e0e0;
        }
        .scenario-tab.active {
            background: rgba(118, 185, 0, 0.15);
            border-color: #76b900;
            color: #76b900;
        }
        .scenario-details {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .scenario-details h4 {
            color: #76b900;
            margin-bottom: 15px;
        }
        .assumption-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .assumption-item {
            text-align: center;
        }
        .assumption-item .label {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 4px;
        }
        .assumption-item .value {
            font-size: 1.1rem;
            color: #e0e0e0;
            font-weight: 500;
        }
        .sensitivity-section {
            margin-bottom: 30px;
        }
        .sensitivity-section h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        .sensitivity-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            overflow: hidden;
        }
        .sensitivity-table th,
        .sensitivity-table td {
            padding: 12px 16px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .sensitivity-table th {
            background: rgba(118, 185, 0, 0.1);
            color: #76b900;
            font-weight: 600;
        }
        .sensitivity-table td {
            color: #e0e0e0;
        }
        .sensitivity-table td.highlight {
            background: rgba(118, 185, 0, 0.15);
            color: #76b900;
            font-weight: 600;
        }
        .sensitivity-table td.below-current {
            color: #ff6b6b;
        }
        .sensitivity-table td.above-current {
            color: #00d4aa;
        }
        .historical-growth {
            margin-bottom: 30px;
        }
        .historical-growth h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        .growth-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }
        .growth-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .growth-item .metric {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 6px;
        }
        .growth-item .rate {
            font-size: 1.2rem;
            font-weight: 600;
        }
        .growth-item .rate.positive { color: #00d4aa; }
        .growth-item .rate.negative { color: #ff6b6b; }
        .growth-item.selected {
            border-color: #76b900;
            background: rgba(118, 185, 0, 0.1);
        }
        @media (max-width: 768px) {
            .charts-container { grid-template-columns: 1fr; }
            .overview-grid { grid-template-columns: 1fr; }
            .header h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>NVIDIA Corporation (NVDA)</h1>
        <p>Financial Dashboard - AI & Accelerated Computing Leader</p>
    </div>

    <!-- Investment Overview Section -->
    <div class="overview-section">
        <button class="overview-toggle" onclick="toggleOverview()">
            <span>Investment Overview & Analysis</span>
            <span class="arrow">▼</span>
        </button>
        <div class="overview-content" id="overviewContent">
            <div class="overview-grid">
                <!-- Company Overview -->
                <div class="overview-card">
                    <h3>Company Overview</h3>
                    <p>NVIDIA is the dominant provider of graphics processing units (GPUs) and accelerated computing platforms for artificial intelligence, data centers, gaming, professional visualization, and automotive applications. The company has evolved from a gaming GPU specialist to a full-stack computing infrastructure provider with data center-scale offerings, pioneering accelerated computing with its CUDA programming model and comprehensive software ecosystem.</p>
                </div>

                <!-- Business Model -->
                <div class="overview-card">
                    <h3>Business Model</h3>
                    <p>Hardware-centric model with high-margin GPU sales (Data Center ~88% of revenue) supplemented by networking products, software licensing (NVIDIA AI Enterprise, vGPU), and emerging cloud services (DGX Cloud).</p>
                    <ul>
                        <li class="revenue-stream"><span>Data Center (Compute)</span> <span class="percent">75%</span></li>
                        <li class="revenue-stream"><span>Data Center (Networking)</span> <span class="percent">13%</span></li>
                        <li class="revenue-stream"><span>Gaming</span> <span class="percent">8%</span></li>
                        <li class="revenue-stream"><span>Professional Visualization</span> <span class="percent">2%</span></li>
                        <li class="revenue-stream"><span>Automotive</span> <span class="percent">1%</span></li>
                        <li class="revenue-stream"><span>OEM & Other</span> <span class="percent">1%</span></li>
                    </ul>
                </div>

                <!-- Competitive Position -->
                <div class="overview-card">
                    <h3>Competitive Position</h3>
                    <p><strong>Market Position:</strong> Overwhelming leader in AI/data center GPUs with 80-90% market share</p>
                    <p><strong>Main Competitors:</strong> AMD (MI300X), Intel (Gaudi), Broadcom, Custom silicon (Google TPU, Amazon Trainium, Microsoft Maia)</p>
                    <p><strong>Moat Factors:</strong></p>
                    <ul>
                        <li>CUDA ecosystem with 5.9M+ developers (very strong)</li>
                        <li>Multi-generation technology leadership (strong)</li>
                        <li>Full-stack integration: GPUs + CPUs + DPUs + networking (strong)</li>
                        <li>Scale and TSMC partnerships (strong)</li>
                    </ul>
                    <p><strong>Weaknesses:</strong></p>
                    <ul>
                        <li>Extreme customer concentration (4 customers = 61% of revenue)</li>
                        <li>Hyperscalers developing custom chips</li>
                        <li>TSMC manufacturing dependence</li>
                        <li>Export controls limiting China revenue (13%)</li>
                    </ul>
                </div>

                <!-- Growth Drivers -->
                <div class="overview-card">
                    <h3>Growth Drivers</h3>
                    <ul>
                        <li>Explosive AI demand - global AI market growing 25x to $4.8T by 2033</li>
                        <li>Blackwell platform ramp with $500B+ booking pipeline through 2026</li>
                        <li>Enterprise AI adoption and sovereign AI deployment</li>
                        <li>Generative AI and agentic AI applications across industries</li>
                        <li>Data center GPU acceleration replacing CPU-only architectures</li>
                        <li>Gaming GPU refresh with RTX 50 Series (Blackwell)</li>
                        <li>Automotive autonomous vehicle platforms (DRIVE)</li>
                        <li>Networking growth as data centers scale to thousands of GPUs</li>
                    </ul>
                </div>

                <!-- Key Risks -->
                <div class="overview-card risks">
                    <h3>Key Risks</h3>
                    <ul>
                        <li><span class="risk-high">HIGH:</span> Customer concentration (61% from 4 customers)</li>
                        <li><span class="risk-high">HIGH:</span> AI spending slowdown/bubble risk</li>
                        <li><span class="risk-high">HIGH:</span> Custom silicon competition (45% market share by 2028)</li>
                        <li><span class="risk-high">HIGH:</span> US-China export controls (13% revenue at risk)</li>
                        <li><span class="risk-high">HIGH:</span> TSMC supply chain dependence</li>
                        <li><span class="risk-moderate">MODERATE:</span> Gross margin pressure from Blackwell costs</li>
                        <li><span class="risk-moderate">MODERATE:</span> Product transition execution risks</li>
                        <li><span class="risk-moderate">MODERATE:</span> Antitrust scrutiny (80-90% market share)</li>
                        <li><span class="risk-moderate">MODERATE:</span> Gaming market cyclicality</li>
                    </ul>
                </div>

                <!-- Bull Case -->
                <div class="overview-card bull">
                    <h3>Bull Case</h3>
                    <ul>
                        <li>Dominant 80-90% AI chip market share with CUDA moat (5.9M developers)</li>
                        <li>$4T annual AI infrastructure spending by 2030; entire 2025-2026 Blackwell production sold out</li>
                        <li>Blackwell ramp with $500B+ booking pipeline through 2026</li>
                        <li>Only full-stack provider (GPUs + CPUs + DPUs + networking + software)</li>
                        <li>Strong margins (73-75%) with pricing power due to performance leadership</li>
                        <li>Diversified growth: enterprise AI, sovereign AI, automotive, gaming RTX 50</li>
                        <li>Massive R&D ($13B annually) sustains innovation pipeline (Rubin 2026)</li>
                        <li>Hyperscaler CapEx remains robust: $200B+ combined spending in 2026</li>
                    </ul>
                </div>

                <!-- Bear Case -->
                <div class="overview-card bear">
                    <h3>Bear Case</h3>
                    <ul>
                        <li>Extreme customer concentration (61% from 4 customers) = single-point-of-failure</li>
                        <li>Custom silicon threat: Google TPU, Amazon Trainium to reach 45% market by 2028</li>
                        <li>AI spending bubble risk - any pause would crash revenue (88% from data center)</li>
                        <li>Valuation risk at premium multiples requiring flawless execution</li>
                        <li>TSMC supply chain brittleness; Taiwan geopolitical risk</li>
                        <li>China exposure (13%) vulnerable to export control tightening</li>
                        <li>Gross margin compression from Blackwell costs (CoWoS, HBM3e)</li>
                        <li>Product transition risk - $4.5B H20 inventory charge example</li>
                        <li>Antitrust scrutiny with 80-90% market share</li>
                        <li>Semiconductor cyclicality - current AI boom could reverse in recession</li>
                    </ul>
                </div>

                <!-- Recent Developments -->
                <div class="overview-card">
                    <h3>Recent Developments</h3>
                    <ul>
                        <li><strong>Nov 2025:</strong> Q3 FY2026 record $57.0B revenue (+62% YoY), $31.9B net income</li>
                        <li><strong>Nov 2025:</strong> CEO: "Blackwell sales off the charts" - $500B pipeline through 2026</li>
                        <li><strong>Oct 2025:</strong> Disclosed 4 customers = 61% of Q3 revenue (up from ~36%)</li>
                        <li><strong>Sep 2025:</strong> Launched RTX 50 Series (Blackwell) with neural graphics</li>
                        <li><strong>Aug 2025:</strong> GB200 NVL72 shipment forecasts cut 50% due to thermal challenges</li>
                        <li><strong>Jan 2025:</strong> Trump policy shift allows H200 sales to China under license</li>
                        <li><strong>Jan 2025:</strong> $4.5B charge for excess H20 inventory and obligations</li>
                        <li><strong>Nov 2024:</strong> Launched Blackwell architecture (B100, B200, GB200)</li>
                        <li><strong>Sep 2024:</strong> CoWoS packaging bottleneck at TSMC through 2025</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- KPI Cards -->
    <div class="kpi-grid" id="kpiGrid"></div>

    <!-- Management Guidance Section -->
    <div class="guidance-section" id="guidanceSection">
        <div class="guidance-header">
            <h3>Management Guidance</h3>
            <span class="guidance-meta">As of <span id="guidanceAsOf">Q3 FY2026 Earnings</span> | <span id="guidanceFY">FY2026</span></span>
        </div>
        <div class="guidance-grid" id="guidanceGrid"></div>
        <div class="guidance-commentary" id="guidanceCommentary"></div>
    </div>

    <!-- Charts -->
    <h2 class="section-title">Revenue & Growth</h2>
    <div class="charts-container">
        <div class="chart-card">
            <div class="chart-header">
                <h3>Revenue Trend</h3>
                <button class="help-btn" onclick="openModal('revenue')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Revenue by Segment</h3>
                <button class="help-btn" onclick="openModal('segment')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="segmentChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Revenue Growth Rate (YoY)</h3>
                <button class="help-btn" onclick="openModal('growth')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="growthChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Quarterly Revenue Trend</h3>
                <button class="help-btn" onclick="openModal('quarterly')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="quarterlyChart"></canvas>
            </div>
        </div>
    </div>

    <h2 class="section-title">Profitability</h2>
    <div class="charts-container">
        <div class="chart-card">
            <div class="chart-header">
                <h3>Profit Margins</h3>
                <button class="help-btn" onclick="openModal('margins')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="marginsChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Operating Income</h3>
                <button class="help-btn" onclick="openModal('opIncome')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="opIncomeChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Net Income</h3>
                <button class="help-btn" onclick="openModal('netIncome')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="netIncomeChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Diluted EPS</h3>
                <button class="help-btn" onclick="openModal('eps')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="epsChart"></canvas>
            </div>
        </div>
    </div>

    <h2 class="section-title">Cash Flow & Balance Sheet</h2>
    <div class="charts-container">
        <div class="chart-card">
            <div class="chart-header">
                <h3>Free Cash Flow Components</h3>
                <button class="help-btn" onclick="openModal('fcf')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="fcfChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Cash vs Debt</h3>
                <button class="help-btn" onclick="openModal('cashDebt')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="cashDebtChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Shareholders' Equity</h3>
                <button class="help-btn" onclick="openModal('equity')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="equityChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Total Assets</h3>
                <button class="help-btn" onclick="openModal('assets')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="assetsChart"></canvas>
            </div>
        </div>
    </div>

    <h2 class="section-title">Efficiency & Returns</h2>
    <div class="charts-container">
        <div class="chart-card">
            <div class="chart-header">
                <h3>R&D as % of Revenue</h3>
                <button class="help-btn" onclick="openModal('rd')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="rdChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>FCF Margin</h3>
                <button class="help-btn" onclick="openModal('fcfMargin')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="fcfMarginChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <h3>Data Center Revenue Growth</h3>
                <button class="help-btn" onclick="openModal('dcGrowth')">?</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="dcGrowthChart"></canvas>
            </div>
        </div>
    </div>

    <!-- DCF Valuation Section -->
    <h2 class="section-title">DCF Valuation</h2>
    <div class="dcf-section">
        <div class="dcf-summary">
            <div class="dcf-card highlight">
                <div class="dcf-label">Intrinsic Value (Base)</div>
                <div class="dcf-value" id="dcfIV">$101</div>
                <div class="dcf-change negative" id="dcfUpside">-27% downside</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Entry Price (15% CAGR)</div>
                <div class="dcf-value" id="dcfEntry">$64</div>
                <div class="dcf-sublabel">Buy below for 15% annual return</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Current Price</div>
                <div class="dcf-value" id="dcfCurrent">$138</div>
            </div>
            <div class="dcf-card">
                <div class="dcf-label">Prob-Weighted IV</div>
                <div class="dcf-value" id="dcfWeighted">$106</div>
                <div class="dcf-sublabel">25% Bull / 50% Base / 25% Bear</div>
            </div>
        </div>

        <div class="dcf-warning" id="growthWarning">
            <span class="warning-icon">&#9888;</span>
            <span id="warningText">CAUTION: Equity CAGR (47.6%) is 16.6pp below Revenue CAGR (64.2%). This reflects rapid margin expansion and AI boom. Consider revenue/FCF growth for forward projections.</span>
        </div>

        <div class="dcf-inputs">
            <h4>DCF Model Inputs</h4>
            <div class="dcf-inputs-grid">
                <div class="dcf-input-card">
                    <div class="dcf-input-label">Base Year FCF</div>
                    <div class="dcf-input-value" id="baseFCF">$60.9B</div>
                    <div class="dcf-input-note">FY2025 actual</div>
                </div>
                <div class="dcf-input-card">
                    <div class="dcf-input-label">Shares Outstanding</div>
                    <div class="dcf-input-value" id="sharesOut">24.5B</div>
                </div>
                <div class="dcf-input-card">
                    <div class="dcf-input-label">Net Cash Position</div>
                    <div class="dcf-input-value" id="netDebt">$34.7B</div>
                    <div class="dcf-input-note">Strong balance sheet</div>
                </div>
            </div>
            <div class="fcf-projections">
                <h5>Projected FCF (5-Year)</h5>
                <div class="fcf-projection-table" id="fcfProjectionTable"></div>
            </div>
        </div>

        <div class="dcf-controls">
            <div class="slider-group">
                <label>Growth Rate: <span id="growthValue">48%</span></label>
                <input type="range" id="growthSlider" min="0" max="80" value="47.6" step="0.5">
                <div class="slider-hint" id="growthHint">Based on equity 5yr CAGR</div>
            </div>
            <div class="slider-group">
                <label>WACC: <span id="waccValue">10.5%</span></label>
                <input type="range" id="waccSlider" min="6" max="18" value="10.5" step="0.5">
            </div>
            <div class="slider-group">
                <label>Terminal Growth: <span id="terminalValue">3.5%</span></label>
                <input type="range" id="terminalSlider" min="0" max="6" value="3.5" step="0.5">
            </div>
        </div>

        <div class="scenario-tabs">
            <button class="scenario-tab active" data-scenario="base" onclick="switchScenario('base')">Base Case</button>
            <button class="scenario-tab" data-scenario="bull" onclick="switchScenario('bull')">Bull Case</button>
            <button class="scenario-tab" data-scenario="bear" onclick="switchScenario('bear')">Bear Case</button>
        </div>

        <div class="scenario-details" id="scenarioDetails">
            <div class="scenario-assumptions">
                <h4>Assumptions</h4>
                <div class="assumption-grid" id="assumptionGrid"></div>
            </div>
        </div>

        <div class="sensitivity-section">
            <h4>Sensitivity Analysis: Intrinsic Value by WACC & Terminal Growth</h4>
            <table class="sensitivity-table" id="sensitivityMatrix"></table>
        </div>

        <div class="historical-growth">
            <h4>Historical Growth Rates (CAGR)</h4>
            <div class="growth-grid" id="growthGrid"></div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle"></h3>
                <button class="modal-close" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        // Embed CSV data directly
        const csvData = `Period,Revenue,CostOfRevenue,GrossProfit,GrossMargin,OperatingExpenses,ResearchDevelopment,SGA,OperatingIncome,OperatingMargin,NetIncome,NetMargin,DilutedEPS,DilutedShares,FreeCashFlow,OperatingCashFlow,CapEx,ComputeNetworkingRevenue,GraphicsRevenue,DataCenterRevenue,GamingRevenue,ProfessionalVisualizationRevenue,AutomotiveRevenue,TotalAssets,TotalLiabilities,ShareholdersEquity,Cash,CashAndInvestments,TotalDebt,SharesOutstanding
FY2015,4682,2278,2404,51.3,2234,1331,903,170,3.6,-157,-3.4,-0.07,2485,1042,1666,624,,,,,,,,5907,2124,3783,1199,2912,1987,2510
FY2016,5010,2447,2563,51.2,2328,1386,942,235,4.7,614,12.3,0.26,2539,894,1672,778,,,,,,,,7201,2952,4249,1423,3292,1951,2584
FY2017,6910,2847,4063,58.8,2839,1797,1042,1224,17.7,1666,24.1,0.70,2440,1491,2676,1185,,,,,,,,10188,3933,6255,2182,4408,1985,2537
FY2018,9714,3892,5822,59.9,3587,2376,1211,2235,23.0,3047,31.4,1.27,2520,2042,3399,1357,,,,,,,,13292,5184,8108,2827,6024,1986,2596
FY2019,11716,4545,7171,61.2,4293,2838,1455,2878,24.6,4141,35.3,1.71,2520,1995,3743,1748,,,,,,,,13775,4787,8988,782,9370,1987,2592
FY2020,10918,5265,5653,51.8,4392,2855,1537,1261,11.5,2796,25.6,1.10,2600,3030,5822,2792,,,,,,,,17315,6002,11313,10896,14353,1988,2726
FY2021,16675,6279,10396,62.3,5864,3924,1940,4532,27.2,4332,26.0,1.68,2680,4696,6776,2080,,,,,,,,28791,11700,17091,847,11561,1993,2775
FY2022,26914,9439,17475,64.9,7434,5268,2166,10041,37.3,9752,36.2,3.85,2535,8132,10810,2678,,,,,,,,44187,17082,27105,1990,21606,2000,2803
Q1 FY2023,7192,2544,4648,64.6,2508,1875,633,2140,29.8,2043,28.4,0.82,2490,,,,,,,2042,289,231,37726,16723,21003,4066,14873,11953,2473
Q2 FY2023,6704,2384,4320,64.4,2388,1782,606,1932,28.8,1618,24.1,0.64,2500,,,,,,,1950,284,251,37667,16735,20932,4054,14661,11953,2467
Q3 FY2023,5931,2273,3658,61.7,2320,1729,591,1338,22.6,680,11.5,0.27,2510,,,,,,,1574,270,226,38105,16970,21135,3389,13296,10953,2466
FY2023,26974,11618,15356,56.9,11132,7339,2440,4224,15.7,4368,16.2,1.74,2507,5641,5641,1833,,,,9067,1544,903,41182,19081,22101,3389,13296,10953,2466
Q1 FY2024,7192,2544,4648,64.6,2508,1875,633,2140,29.8,2043,28.4,0.82,2490,,,,,,,2042,289,231,41182,19081,22101,3389,13296,10953,2473
Q2 FY2024,13507,3897,9610,71.2,3638,2461,1177,5972,44.2,6188,45.8,2.48,2502,,,,,,,2486,379,324,43804,17802,26002,5340,24147,10953,2483
Q3 FY2024,18120,4645,13475,74.4,4013,2734,1270,9462,52.2,9243,51.0,3.71,2497,,,,,,,2856,379,370,49426,19734,29692,3922,23229,10953,2491
FY2024,60922,16621,44301,72.7,11329,8675,2654,32972,54.1,29760,48.9,11.93,2494,27021,28090,1069,47405,13517,47525,10447,1553,1091,65728,22750,42978,7280,25984,9709,2464
Q1 FY2025,26044,5638,20406,78.4,3497,2720,777,16909,64.9,14881,57.1,5.98,2489,,,,,,,2650,416,329,77072,27930,49142,7587,31438,9710,2459
Q2 FY2025,30040,6397,23643,78.7,3929,3090,839,19714,65.6,16599,55.2,6.68,2487,,,,,,,2906,421,364,87663,33072,54591,8565,39465,9710,2458
Q3 FY2025,35082,8926,26156,74.6,4287,3390,897,21869,62.3,19309,55.0,0.78,24774,,,,,,,3172,416,401,92970,35551,57419,9174,46374,9710,2471
FY2025,130497,32639,97858,75.0,16405,12914,3491,81453,62.4,72880,55.8,2.94,24804,60853,64089,3236,116193,14304,115186,11350,1878,1694,111601,32274,79327,8589,43210,8463,24477
Q1 FY2026,43597,10836,32761,75.1,4936,3551,1385,27825,63.8,22114,50.7,0.90,24503,,,,,,,4120,477,462,123086,39476,83610,9625,52835,8462,24443
Q2 FY2026,47208,12448,34760,73.6,6508,4729,1779,28252,59.9,23103,48.9,0.94,24560,,,,,,,4514,493,445,139291,44732,94559,10403,57113,8462,24420
Q3 FY2026,57006,15157,41849,73.4,5839,4705,1134,36010,63.2,31910,56.0,1.30,24483,,,,,,,5478,534,523,161148,42251,118897,11486,60608,8467,24327`;

        // Embed analysis JSON
        const analysis = {
            "ticker": "NVDA",
            "company_name": "NVIDIA Corporation",
            "guidance": {
                "as_of": "Q3 FY2026 Earnings (November 19, 2025)",
                "fiscal_year": "FY2026 (Feb 2025 - Jan 2026)",
                "items": [
                    {
                        "metric": "Revenue",
                        "target": "$65.0B ± 2%",
                        "period": "Q4 FY2026",
                        "vs_prior": "raised",
                        "notes": "Represents 65% YoY growth vs $39.3B in Q4 FY2025; above Wall Street consensus of $61.7B"
                    },
                    {
                        "metric": "Gross Margin (GAAP)",
                        "target": "74.8% ± 50 bps",
                        "period": "Q4 FY2026",
                        "vs_prior": "raised",
                        "notes": "Q3 actual was 73.4% GAAP; guidance implies continued margin strength despite Blackwell ramp"
                    },
                    {
                        "metric": "Gross Margin (Non-GAAP)",
                        "target": "75.0% ± 50 bps",
                        "period": "Q4 FY2026",
                        "vs_prior": "raised",
                        "notes": "Q3 actual was 73.6% non-GAAP"
                    },
                    {
                        "metric": "Operating Expenses (GAAP)",
                        "target": "~$6.7B",
                        "period": "Q4 FY2026",
                        "vs_prior": "maintained",
                        "notes": "Continued investment in R&D for Rubin architecture and AI software stack"
                    },
                    {
                        "metric": "Operating Expenses (Non-GAAP)",
                        "target": "~$5.0B",
                        "period": "Q4 FY2026",
                        "vs_prior": "maintained",
                        "notes": "Excludes stock-based compensation"
                    },
                    {
                        "metric": "Full Year EPS",
                        "target": "$4.42 (FY2026), $6.88 (FY2027)",
                        "period": "FY2026 and FY2027",
                        "vs_prior": "new",
                        "notes": "Implies 50.9% growth in FY2026 and 55.7% growth in FY2027"
                    },
                    {
                        "metric": "Blackwell Revenue Visibility",
                        "target": "$500B booking pipeline",
                        "period": "Through end of CY2026",
                        "vs_prior": "new",
                        "notes": "CEO stated visibility to half a trillion dollars in Blackwell and Rubin revenue from start of 2025 through end of calendar 2026"
                    },
                    {
                        "metric": "Data Center Revenue",
                        "target": "Continued strong growth",
                        "period": "FY2026",
                        "vs_prior": "maintained",
                        "notes": "Q3 Data Center revenue was $51.2B, representing 90% of total revenue; Blackwell ramp expected to drive growth"
                    }
                ],
                "management_commentary": "CEO Jensen Huang: 'Blackwell sales are off the charts' with production sold out through 2026. CFO noted Q4 guidance reflects Blackwell ramp with strong demand from cloud service providers and enterprises. Management emphasized AI infrastructure spending remains robust with customer urgency to deploy AI capabilities. Acknowledged customer concentration as structural characteristic of hyperscale AI infrastructure market."
            }
        };

        // Embed DCF JSON
        const dcfData = {
            "ticker": "NVDA",
            "valuation_date": "2026-02-02",
            "current_price": 138.0,
            "inputs": {
                "shares_outstanding": 24477,
                "net_debt": -34747,
                "total_debt": 8463,
                "cash": 43210,
                "last_fcf": 60853,
                "last_revenue": 130497,
                "currency": "USD",
                "units": "millions"
            },
            "historical_growth": {
                "revenue_3yr_cagr": 69.3,
                "revenue_5yr_cagr": 64.2,
                "eps_3yr_cagr": 96.9,
                "eps_5yr_cagr": 92.9,
                "equity_3yr_cagr": 43.0,
                "equity_5yr_cagr": 47.6,
                "fcf_3yr_cagr": 95.6,
                "fcf_5yr_cagr": 82.2,
                "selected_growth_rate": 47.6,
                "growth_rate_source": "equity_5yr_cagr",
                "growth_divergence_warning": "CAUTION: Equity CAGR (47.6%) is 16.6pp below Revenue CAGR (64.2%). This reflects rapid margin expansion and AI boom. Consider revenue/FCF growth for forward projections."
            },
            "assumptions": {
                "base": {
                    "growth_rates": [40, 35, 28, 22, 18],
                    "fcf_margin": 45,
                    "wacc": 10.5,
                    "terminal_growth": 3.5
                },
                "bull": {
                    "growth_rates": [50, 45, 38, 32, 25],
                    "fcf_margin": 48,
                    "wacc": 9.5,
                    "terminal_growth": 4.0
                },
                "bear": {
                    "growth_rates": [25, 18, 12, 8, 5],
                    "fcf_margin": 40,
                    "wacc": 12.0,
                    "terminal_growth": 2.5
                }
            },
            "valuation": {
                "base": {
                    "intrinsic_value": 100.76,
                    "upside": -27.0
                },
                "bull": {
                    "intrinsic_value": 177.58,
                    "upside": 28.7
                },
                "bear": {
                    "intrinsic_value": 44.02,
                    "upside": -68.1
                }
            },
            "entry_price": {
                "base": {
                    "entry_price": 63.65
                }
            },
            "sensitivity": {
                "wacc_range": [8.5, 9.5, 10.5, 11.5, 12.5],
                "terminal_growth_range": [2.5, 3.0, 3.5, 4.0, 4.5],
                "matrix": [
                    [122.75, 132.22, 143.58, 157.46, 174.81],
                    [104.24, 110.86, 118.58, 127.7, 138.65],
                    [90.39, 95.23, 100.76, 107.14, 114.59],
                    [79.65, 83.31, 87.43, 92.1, 97.43],
                    [71.08, 73.93, 77.09, 80.62, 84.6]
                ]
            },
            "probability_weighted": {
                "weighted_iv": 105.78
            }
        };

        // Parse CSV
        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const headers = lines[0].split(',');
            return lines.slice(1).map(line => {
                const values = line.split(',');
                const obj = {};
                headers.forEach((h, i) => obj[h.trim()] = values[i]?.trim());
                return obj;
            });
        }

        const data = parseCSV(csvData);

        // Sort data chronologically
        data.sort((a, b) => {
            const parseDate = (p) => {
                const year = parseInt(p.match(/\d{4}/)?.[0] || '0');
                const isQ1 = p.includes('Q1');
                const isQ2 = p.includes('Q2');
                const isQ3 = p.includes('Q3');
                const isQ4 = p.includes('Q4');
                const isFY = p.startsWith('FY');
                const subOrder = isQ1 ? 1 : isQ2 ? 2 : isQ3 ? 4 : isQ4 ? 5 : isFY ? 7 : 0;
                return year * 10 + subOrder;
            };
            return parseDate(a.Period) - parseDate(b.Period);
        });

        // Filter for annual data
        const fyData = data.filter(d => d.Period.startsWith('FY'));

        // Filter for quarterly data
        const qData = data.filter(d => d.Period.includes('Q'));

        // Helper functions
        function formatNumber(num, decimals = 0) {
            if (!num || num === '') return 'N/A';
            const n = parseFloat(num);
            if (isNaN(n)) return 'N/A';
            if (Math.abs(n) >= 1000) return '$' + (n/1000).toFixed(decimals) + 'B';
            return '$' + n.toFixed(decimals) + 'M';
        }

        function formatPercent(num) {
            if (!num || num === '') return 'N/A';
            return parseFloat(num).toFixed(1) + '%';
        }

        function calcYoYChange(current, previous) {
            if (!previous || !current || previous === '' || current === '') return null;
            const curr = parseFloat(current);
            const prev = parseFloat(previous);
            if (isNaN(curr) || isNaN(prev) || prev === 0) return null;
            return ((curr - prev) / Math.abs(prev) * 100).toFixed(1);
        }

        // Render KPIs
        function renderKPIs() {
            const latest = fyData[fyData.length - 1];
            const previous = fyData[fyData.length - 2];

            const kpis = [
                {
                    label: 'Revenue (FY2025)',
                    value: formatNumber(latest.Revenue, 1),
                    change: calcYoYChange(latest.Revenue, previous.Revenue)
                },
                {
                    label: 'Net Income',
                    value: formatNumber(latest.NetIncome, 1),
                    change: calcYoYChange(latest.NetIncome, previous.NetIncome)
                },
                {
                    label: 'Gross Margin',
                    value: formatPercent(latest.GrossMargin),
                    change: (parseFloat(latest.GrossMargin) - parseFloat(previous.GrossMargin)).toFixed(1)
                },
                {
                    label: 'Operating Margin',
                    value: formatPercent(latest.OperatingMargin),
                    change: (parseFloat(latest.OperatingMargin) - parseFloat(previous.OperatingMargin)).toFixed(1)
                },
                {
                    label: 'Free Cash Flow',
                    value: formatNumber(latest.FreeCashFlow, 1),
                    change: calcYoYChange(latest.FreeCashFlow, previous.FreeCashFlow)
                },
                {
                    label: 'Diluted EPS',
                    value: '$' + parseFloat(latest.DilutedEPS).toFixed(2),
                    change: calcYoYChange(latest.DilutedEPS, previous.DilutedEPS)
                },
                {
                    label: 'Data Center Revenue',
                    value: formatNumber(latest.DataCenterRevenue, 1),
                    change: calcYoYChange(latest.DataCenterRevenue, previous.DataCenterRevenue)
                },
                {
                    label: 'Net Cash Position',
                    value: formatNumber(parseFloat(latest.CashAndInvestments) - parseFloat(latest.TotalDebt), 1),
                    change: null
                }
            ];

            const grid = document.getElementById('kpiGrid');
            grid.innerHTML = kpis.map(kpi => {
                let changeHtml = '';
                if (kpi.change !== null) {
                    const changeClass = parseFloat(kpi.change) >= 0 ? 'positive' : 'negative';
                    const sign = parseFloat(kpi.change) >= 0 ? '+' : '';
                    changeHtml = `<div class="kpi-change ${changeClass}">${sign}${kpi.change}% YoY</div>`;
                }
                return `
                    <div class="kpi-card">
                        <div class="kpi-value">${kpi.value}</div>
                        <div class="kpi-label">${kpi.label}</div>
                        ${changeHtml}
                    </div>
                `;
            }).join('');
        }

        // Render Guidance
        function renderGuidance() {
            if (!analysis.guidance || !analysis.guidance.items) return;

            const guidance = analysis.guidance;
            document.getElementById('guidanceAsOf').textContent = guidance.as_of || '';
            document.getElementById('guidanceFY').textContent = guidance.fiscal_year || '';

            const grid = document.getElementById('guidanceGrid');
            grid.innerHTML = guidance.items.map(item => {
                const vsClass = item.vs_prior ? item.vs_prior.toLowerCase() : 'new';
                const vsLabel = item.vs_prior ? item.vs_prior.charAt(0).toUpperCase() + item.vs_prior.slice(1) : 'New';
                return `
                    <div class="guidance-card">
                        <div class="guidance-metric">${item.metric}</div>
                        <div class="guidance-target">${item.target}</div>
                        <div class="guidance-period">${item.period}</div>
                        <span class="guidance-vs-prior ${vsClass}">${vsLabel}</span>
                        ${item.notes ? `<div class="guidance-notes">${item.notes}</div>` : ''}
                    </div>
                `;
            }).join('');

            const commentary = document.getElementById('guidanceCommentary');
            if (guidance.management_commentary) {
                commentary.textContent = guidance.management_commentary;
                commentary.style.display = 'block';
            } else {
                commentary.style.display = 'none';
            }
        }

        // Chart defaults
        Chart.defaults.color = '#e0e0e0';
        const chartDefaults = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: '#e0e0e0',
                        font: { size: 11 }
                    }
                }
            },
            scales: {
                x: {
                    ticks: { color: '#888' },
                    grid: { color: 'rgba(255,255,255,0.05)' }
                },
                y: {
                    ticks: { color: '#888' },
                    grid: { color: 'rgba(255,255,255,0.05)' }
                }
            }
        };

        const colors = {
            primary: '#76b900',
            secondary: '#00d4aa',
            tertiary: '#0984e3',
            quaternary: '#6c5ce7',
            warning: '#fdcb6e',
            danger: '#ff6b6b'
        };

        // Revenue Chart
        new Chart(document.getElementById('revenueChart'), {
            type: 'bar',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'Revenue ($M)',
                    data: fyData.map(d => parseFloat(d.Revenue)),
                    backgroundColor: colors.primary,
                    borderColor: colors.primary,
                    borderWidth: 1
                }]
            },
            options: {
                ...chartDefaults,
                plugins: {
                    ...chartDefaults.plugins,
                    tooltip: {
                        callbacks: {
                            label: (context) => formatNumber(context.parsed.y, 1)
                        }
                    }
                }
            }
        });

        // Revenue by Segment (stacked bar)
        new Chart(document.getElementById('segmentChart'), {
            type: 'bar',
            data: {
                labels: fyData.filter(d => d.DataCenterRevenue && d.DataCenterRevenue !== '').map(d => d.Period),
                datasets: [
                    {
                        label: 'Data Center',
                        data: fyData.filter(d => d.DataCenterRevenue && d.DataCenterRevenue !== '').map(d => parseFloat(d.DataCenterRevenue || 0)),
                        backgroundColor: colors.primary
                    },
                    {
                        label: 'Gaming',
                        data: fyData.filter(d => d.GamingRevenue && d.GamingRevenue !== '').map(d => parseFloat(d.GamingRevenue || 0)),
                        backgroundColor: colors.secondary
                    },
                    {
                        label: 'Professional Viz',
                        data: fyData.filter(d => d.ProfessionalVisualizationRevenue && d.ProfessionalVisualizationRevenue !== '').map(d => parseFloat(d.ProfessionalVisualizationRevenue || 0)),
                        backgroundColor: colors.tertiary
                    },
                    {
                        label: 'Automotive',
                        data: fyData.filter(d => d.AutomotiveRevenue && d.AutomotiveRevenue !== '').map(d => parseFloat(d.AutomotiveRevenue || 0)),
                        backgroundColor: colors.quaternary
                    }
                ]
            },
            options: {
                ...chartDefaults,
                scales: {
                    ...chartDefaults.scales,
                    x: { ...chartDefaults.scales.x, stacked: true },
                    y: { ...chartDefaults.scales.y, stacked: true }
                }
            }
        });

        // Revenue Growth Rate
        const growthRates = fyData.slice(1).map((d, i) => {
            const current = parseFloat(d.Revenue);
            const previous = parseFloat(fyData[i].Revenue);
            return ((current - previous) / previous * 100).toFixed(1);
        });

        new Chart(document.getElementById('growthChart'), {
            type: 'line',
            data: {
                labels: fyData.slice(1).map(d => d.Period),
                datasets: [{
                    label: 'YoY Revenue Growth %',
                    data: growthRates,
                    borderColor: colors.primary,
                    backgroundColor: colors.primary,
                    tension: 0.4,
                    fill: false,
                    borderWidth: 3
                }]
            },
            options: chartDefaults
        });

        // Quarterly Revenue
        new Chart(document.getElementById('quarterlyChart'), {
            type: 'bar',
            data: {
                labels: qData.map(d => d.Period),
                datasets: [{
                    label: 'Quarterly Revenue ($M)',
                    data: qData.map(d => parseFloat(d.Revenue)),
                    backgroundColor: colors.secondary,
                    borderColor: colors.secondary,
                    borderWidth: 1
                }]
            },
            options: chartDefaults
        });

        // Margins Chart
        new Chart(document.getElementById('marginsChart'), {
            type: 'line',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [
                    {
                        label: 'Gross Margin %',
                        data: fyData.map(d => parseFloat(d.GrossMargin)),
                        borderColor: colors.primary,
                        backgroundColor: colors.primary,
                        tension: 0.4,
                        fill: false,
                        borderWidth: 2
                    },
                    {
                        label: 'Operating Margin %',
                        data: fyData.map(d => parseFloat(d.OperatingMargin)),
                        borderColor: colors.secondary,
                        backgroundColor: colors.secondary,
                        tension: 0.4,
                        fill: false,
                        borderWidth: 2
                    },
                    {
                        label: 'Net Margin %',
                        data: fyData.map(d => parseFloat(d.NetMargin)),
                        borderColor: colors.tertiary,
                        backgroundColor: colors.tertiary,
                        tension: 0.4,
                        fill: false,
                        borderWidth: 2
                    }
                ]
            },
            options: chartDefaults
        });

        // Operating Income
        new Chart(document.getElementById('opIncomeChart'), {
            type: 'bar',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'Operating Income ($M)',
                    data: fyData.map(d => parseFloat(d.OperatingIncome)),
                    backgroundColor: colors.secondary,
                    borderColor: colors.secondary,
                    borderWidth: 1
                }]
            },
            options: chartDefaults
        });

        // Net Income
        new Chart(document.getElementById('netIncomeChart'), {
            type: 'bar',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'Net Income ($M)',
                    data: fyData.map(d => parseFloat(d.NetIncome)),
                    backgroundColor: colors.tertiary,
                    borderColor: colors.tertiary,
                    borderWidth: 1
                }]
            },
            options: chartDefaults
        });

        // EPS Chart
        new Chart(document.getElementById('epsChart'), {
            type: 'line',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'Diluted EPS ($)',
                    data: fyData.map(d => parseFloat(d.DilutedEPS)),
                    borderColor: colors.primary,
                    backgroundColor: colors.primary,
                    tension: 0.4,
                    fill: false,
                    borderWidth: 3
                }]
            },
            options: chartDefaults
        });

        // FCF Components
        new Chart(document.getElementById('fcfChart'), {
            type: 'bar',
            data: {
                labels: fyData.filter(d => d.FreeCashFlow && d.FreeCashFlow !== '').map(d => d.Period),
                datasets: [
                    {
                        label: 'Operating Cash Flow',
                        data: fyData.filter(d => d.OperatingCashFlow && d.OperatingCashFlow !== '').map(d => parseFloat(d.OperatingCashFlow)),
                        backgroundColor: colors.primary
                    },
                    {
                        label: 'CapEx',
                        data: fyData.filter(d => d.CapEx && d.CapEx !== '').map(d => -parseFloat(d.CapEx)),
                        backgroundColor: colors.danger
                    },
                    {
                        label: 'Free Cash Flow',
                        data: fyData.filter(d => d.FreeCashFlow && d.FreeCashFlow !== '').map(d => parseFloat(d.FreeCashFlow)),
                        backgroundColor: colors.secondary
                    }
                ]
            },
            options: chartDefaults
        });

        // Cash vs Debt
        new Chart(document.getElementById('cashDebtChart'), {
            type: 'bar',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [
                    {
                        label: 'Cash & Investments',
                        data: fyData.map(d => parseFloat(d.CashAndInvestments)),
                        backgroundColor: colors.secondary
                    },
                    {
                        label: 'Total Debt',
                        data: fyData.map(d => parseFloat(d.TotalDebt)),
                        backgroundColor: colors.danger
                    }
                ]
            },
            options: chartDefaults
        });

        // Shareholders Equity
        new Chart(document.getElementById('equityChart'), {
            type: 'line',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'Shareholders Equity ($M)',
                    data: fyData.map(d => parseFloat(d.ShareholdersEquity)),
                    borderColor: colors.primary,
                    backgroundColor: 'rgba(118, 185, 0, 0.2)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 2
                }]
            },
            options: chartDefaults
        });

        // Total Assets
        new Chart(document.getElementById('assetsChart'), {
            type: 'bar',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'Total Assets ($M)',
                    data: fyData.map(d => parseFloat(d.TotalAssets)),
                    backgroundColor: colors.tertiary,
                    borderColor: colors.tertiary,
                    borderWidth: 1
                }]
            },
            options: chartDefaults
        });

        // R&D as % of Revenue
        new Chart(document.getElementById('rdChart'), {
            type: 'line',
            data: {
                labels: fyData.map(d => d.Period),
                datasets: [{
                    label: 'R&D % of Revenue',
                    data: fyData.map(d => {
                        const rd = parseFloat(d.ResearchDevelopment);
                        const rev = parseFloat(d.Revenue);
                        return ((rd / rev) * 100).toFixed(1);
                    }),
                    borderColor: colors.primary,
                    backgroundColor: colors.primary,
                    tension: 0.4,
                    fill: false,
                    borderWidth: 3
                }]
            },
            options: chartDefaults
        });

        // FCF Margin
        new Chart(document.getElementById('fcfMarginChart'), {
            type: 'line',
            data: {
                labels: fyData.filter(d => d.FreeCashFlow && d.FreeCashFlow !== '').map(d => d.Period),
                datasets: [{
                    label: 'FCF Margin %',
                    data: fyData.filter(d => d.FreeCashFlow && d.FreeCashFlow !== '').map(d => {
                        const fcf = parseFloat(d.FreeCashFlow);
                        const rev = parseFloat(d.Revenue);
                        return ((fcf / rev) * 100).toFixed(1);
                    }),
                    borderColor: colors.secondary,
                    backgroundColor: colors.secondary,
                    tension: 0.4,
                    fill: false,
                    borderWidth: 3
                }]
            },
            options: chartDefaults
        });

        // Data Center Growth
        const dcGrowth = fyData.filter(d => d.DataCenterRevenue && d.DataCenterRevenue !== '').slice(1).map((d, i) => {
            const dcData = fyData.filter(d => d.DataCenterRevenue && d.DataCenterRevenue !== '');
            const current = parseFloat(d.DataCenterRevenue);
            const previous = parseFloat(dcData[i].DataCenterRevenue);
            return ((current - previous) / previous * 100).toFixed(1);
        });

        new Chart(document.getElementById('dcGrowthChart'), {
            type: 'bar',
            data: {
                labels: fyData.filter(d => d.DataCenterRevenue && d.DataCenterRevenue !== '').slice(1).map(d => d.Period),
                datasets: [{
                    label: 'Data Center YoY Growth %',
                    data: dcGrowth,
                    backgroundColor: colors.primary,
                    borderColor: colors.primary,
                    borderWidth: 1
                }]
            },
            options: chartDefaults
        });

        // Modal functions
        function openModal(key) {
            const descriptions = {
                revenue: {
                    title: "Revenue",
                    content: `
                        <p><strong>Revenue</strong> represents NVIDIA's total income from GPU sales, networking products, and software/services.</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> Revenue exploded from $10.9B (FY2020) to $130.5B (FY2025) - a 12x increase in 5 years driven by the AI boom. Data Center segment now represents ~88% of total revenue, up from negligible levels pre-2020.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Data Center dominance:</strong> 88% of revenue comes from AI/data center GPUs - any slowdown in hyperscaler spending would be catastrophic</li>
                            <li><strong>Blackwell ramp:</strong> New Blackwell architecture launching with $500B booking pipeline through 2026</li>
                            <li><strong>Customer concentration:</strong> 4 direct customers = 61% of Q3 FY2026 revenue</li>
                            <li><strong>China risk:</strong> 13% of revenue subject to export controls</li>
                        </ul>
                    `
                },
                segment: {
                    title: "Revenue by Segment",
                    content: `
                        <p><strong>NVIDIA's revenue breakdown</strong> shows dramatic shift to Data Center dominance:</p>
                        <div class="metric-highlight">
                            <strong>Current Mix (FY2025):</strong>
                            <ul>
                                <li>Data Center: $115.2B (88%) - AI training & inference GPUs</li>
                                <li>Gaming: $11.4B (9%) - GeForce RTX GPUs</li>
                                <li>Professional Visualization: $1.9B (1.5%)</li>
                                <li>Automotive: $1.7B (1.3%)</li>
                            </ul>
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Data Center concentration risk:</strong> 88% dependency on AI infrastructure spending creates vulnerability</li>
                            <li><strong>Gaming stability:</strong> Gaming provides counter-cyclical diversification but is now small relative to Data Center</li>
                            <li><strong>Blackwell mix:</strong> H200 and GB200 products will drive Data Center growth through FY2026</li>
                        </ul>
                    `
                },
                growth: {
                    title: "Revenue Growth Rate",
                    content: `
                        <p><strong>YoY Revenue Growth</strong> shows NVIDIA's explosive AI-driven expansion:</p>
                        <div class="metric-highlight">
                            <strong>Recent Growth:</strong>
                            <ul>
                                <li>FY2025: +114% YoY ($130.5B vs $60.9B)</li>
                                <li>FY2024: +126% YoY ($60.9B vs $27.0B)</li>
                                <li>FY2023: +0.2% (crypto crash, pre-AI boom)</li>
                                <li>5-Year CAGR: 64.2%</li>
                            </ul>
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Sustainability:</strong> 100%+ growth rates are not sustainable - expect deceleration</li>
                            <li><strong>Blackwell ramp:</strong> Q4 FY2026 guidance of $65B (+65% YoY) shows continued strong growth</li>
                            <li><strong>Custom silicon impact:</strong> Hyperscaler in-house chips could slow growth starting 2026-2027</li>
                            <li><strong>Law of large numbers:</strong> Growing from $130B base requires adding $50B+ annually for 40% growth</li>
                        </ul>
                    `
                },
                quarterly: {
                    title: "Quarterly Revenue",
                    content: `
                        <p><strong>Quarterly revenue trends</strong> reveal NVIDIA's AI acceleration pattern:</p>
                        <div class="metric-highlight">
                            <strong>Recent Quarters:</strong>
                            <ul>
                                <li>Q3 FY2026: $57.0B (record)</li>
                                <li>Q2 FY2026: $47.2B</li>
                                <li>Q1 FY2026: $43.6B</li>
                                <li>Q3 FY2025: $35.1B</li>
                            </ul>
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Sequential acceleration:</strong> Each quarter setting new records as Blackwell ramps</li>
                            <li><strong>Q4 guidance:</strong> $65B midpoint (+38% QoQ) shows massive Blackwell contribution</li>
                            <li><strong>Seasonality fading:</strong> AI infrastructure demand overrides traditional PC/gaming seasonality</li>
                            <li><strong>Lumpiness risk:</strong> Large datacenter deployments can create quarter-to-quarter volatility</li>
                        </ul>
                    `
                },
                margins: {
                    title: "Profit Margins",
                    content: `
                        <p><strong>NVIDIA's margin profile</strong> demonstrates exceptional pricing power and operational leverage:</p>
                        <div class="metric-highlight">
                            <strong>FY2025 Margins:</strong>
                            <ul>
                                <li>Gross Margin: 75.0% (industry-leading)</li>
                                <li>Operating Margin: 62.4%</li>
                                <li>Net Margin: 55.8%</li>
                            </ul>
                            Margins expanded dramatically from FY2023 lows (57%, 16%, 16%) as Data Center mix grew.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Blackwell costs:</strong> CoWoS packaging and HBM3e memory more expensive - could pressure gross margin</li>
                            <li><strong>Competitive pressure:</strong> AMD MI325X priced 20-30% below comparable NVIDIA products</li>
                            <li><strong>Product mix:</strong> Higher-margin H200/GB200 sales offset by higher COGS</li>
                            <li><strong>Q4 guidance:</strong> 74.8% gross margin target shows continued strength</li>
                        </ul>
                    `
                },
                opIncome: {
                    title: "Operating Income",
                    content: `
                        <p><strong>Operating Income</strong> measures profitability after all operating expenses including massive R&D investment:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> Operating income surged from $1.3B (FY2020) to $81.5B (FY2025) - 63x increase. Operating margin expanded from 11.5% to 62.4% as revenue scaled faster than OpEx.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>R&D intensity:</strong> $12.9B R&D spend (10% of revenue) funds Blackwell, Rubin, next-gen architectures</li>
                            <li><strong>Operating leverage:</strong> OpEx growing ~25% annually vs revenue growing 100%+ creates margin expansion</li>
                            <li><strong>Scale advantages:</strong> CUDA software investment amortizes across massive revenue base</li>
                        </ul>
                    `
                },
                netIncome: {
                    title: "Net Income",
                    content: `
                        <p><strong>Net Income</strong> is NVIDIA's bottom-line profit after all expenses and taxes:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> Net income grew from $2.8B (FY2020) to $72.9B (FY2025) - 26x increase. Net margin of 55.8% rivals the most profitable software companies despite being a hardware business.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Profitability sustainability:</strong> 56% net margin is extraordinary - any normalization would significantly impact earnings</li>
                            <li><strong>Tax rate:</strong> Effective tax rate ~13-14% due to favorable jurisdictions and R&D credits</li>
                            <li><strong>Quality of earnings:</strong> Strong cash conversion - FCF roughly tracks net income</li>
                        </ul>
                    `
                },
                eps: {
                    title: "Diluted EPS",
                    content: `
                        <p><strong>Diluted EPS</strong> shows per-share earnings accounting for stock options and dilution:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> EPS grew from $1.10 (FY2020) to $2.94 (FY2025) adjusted for 10:1 stock split. Note: FY2025 shares increased 10x due to June 2024 split. Pre-split basis EPS would be $29.40.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Growth trajectory:</strong> 93% EPS CAGR (5-year) driven by margin expansion and revenue growth</li>
                            <li><strong>FY2026 guidance:</strong> Analysts expect $4.42 (+50.9% YoY)</li>
                            <li><strong>Share dilution:</strong> Stock-based comp creates ~2-3% annual dilution offset by buybacks</li>
                            <li><strong>Valuation:</strong> At $138 price, P/E ~47x on FY2026 estimates</li>
                        </ul>
                    `
                },
                fcf: {
                    title: "Free Cash Flow",
                    content: `
                        <p><strong>Free Cash Flow (FCF)</strong> measures cash generated after capital expenditures:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> FCF grew from $3.0B (FY2020) to $60.9B (FY2025) - 20x increase. FCF margin of 47% demonstrates exceptional cash generation. CapEx is only $3.2B (2.5% of revenue) as TSMC bears manufacturing CapEx.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Asset-light model:</strong> Fabless design means minimal CapEx required - capital efficient business</li>
                            <li><strong>Working capital:</strong> $19.8B inventory (Q3 FY2026) creates cash tied up in WIP</li>
                            <li><strong>Use of cash:</strong> $31.4B cash returned via buybacks/dividends in FY2025</li>
                            <li><strong>Growth funding:</strong> Strong FCF enables aggressive R&D without external financing</li>
                        </ul>
                    `
                },
                cashDebt: {
                    title: "Cash vs Debt",
                    content: `
                        <p><strong>Cash and debt levels</strong> show NVIDIA's financial strength:</p>
                        <div class="metric-highlight">
                            <strong>FY2025 Balance Sheet:</strong>
                            <ul>
                                <li>Cash & Investments: $43.2B</li>
                                <li>Total Debt: $8.5B</li>
                                <li>Net Cash: $34.7B</li>
                            </ul>
                            Fortress balance sheet provides strategic flexibility.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Capital allocation:</strong> $31B returned to shareholders in FY2025 via buybacks</li>
                            <li><strong>M&A capacity:</strong> Could make $50B+ acquisitions if needed (networking, software)</li>
                            <li><strong>Debt maturity:</strong> Minimal near-term maturities, low interest burden</li>
                        </ul>
                    `
                },
                equity: {
                    title: "Shareholders' Equity",
                    content: `
                        <p><strong>Shareholders' Equity</strong> represents net book value - total assets minus liabilities:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> Equity grew from $11.3B (FY2020) to $79.3B (FY2025) - 7x increase. 5-year CAGR of 47.6%. ROE exceeds 90% demonstrating exceptional capital efficiency.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Quality of equity:</strong> Driven by retained earnings, not debt or equity issuance</li>
                            <li><strong>Book value per share:</strong> $3.24 vs $138 stock price = 43x P/B (high intangible value)</li>
                            <li><strong>Organic growth:</strong> Equity growth from operations, not financial engineering</li>
                        </ul>
                    `
                },
                assets: {
                    title: "Total Assets",
                    content: `
                        <p><strong>Total Assets</strong> shows NVIDIA's resource base:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> Assets grew from $17.3B (FY2020) to $111.6B (FY2025). Key components: $43B cash, $20B inventory, $20B PP&E, $12B goodwill/intangibles.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Inventory build:</strong> $19.8B inventory reflects Blackwell ramp and supply constraints</li>
                            <li><strong>Asset efficiency:</strong> Asset turnover ~1.2x (revenue/assets) - efficient use of capital</li>
                            <li><strong>Cash composition:</strong> 39% of assets in cash provides financial flexibility</li>
                        </ul>
                    `
                },
                rd: {
                    title: "R&D as % of Revenue",
                    content: `
                        <p><strong>R&D spending intensity</strong> shows NVIDIA's innovation investment:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> R&D spend reached $12.9B in FY2025 (9.9% of revenue), down from 26% in FY2020. Absolute R&D dollars up 5x while percentage declined due to massive revenue growth.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Architecture pipeline:</strong> Annual cadence (Hopper → Blackwell → Rubin) requires sustained R&D</li>
                            <li><strong>Software investment:</strong> 50%+ of engineers work on software (CUDA, AI frameworks)</li>
                            <li><strong>Competitive moat:</strong> $13B annual R&D vs AMD's ~$6B creates widening gap</li>
                            <li><strong>Operating leverage:</strong> R&D growing slower than revenue creates margin expansion</li>
                        </ul>
                    `
                },
                fcfMargin: {
                    title: "FCF Margin",
                    content: `
                        <p><strong>FCF Margin</strong> measures free cash flow as % of revenue - key profitability metric:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> FCF margin reached 47% in FY2025, up from 28% in FY2020. Among the highest in technology sector, approaching software-like margins despite hardware business.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Working capital impact:</strong> Inventory build ($20B) temporarily depresses FCF vs net income</li>
                            <li><strong>CapEx efficiency:</strong> Only 2.5% CapEx/Revenue due to fabless model</li>
                            <li><strong>Margin sustainability:</strong> 47% FCF margin requires pricing power and operational excellence</li>
                            <li><strong>Cash conversion:</strong> FCF tracking net income shows high earnings quality</li>
                        </ul>
                    `
                },
                dcGrowth: {
                    title: "Data Center Revenue Growth",
                    content: `
                        <p><strong>Data Center growth</strong> is the primary driver of NVIDIA's success:</p>
                        <div class="metric-highlight">
                            <strong>For NVIDIA:</strong> Data Center revenue grew from ~$3B (FY2020) to $115.2B (FY2025) - 38x increase in 5 years. Now 88% of total revenue vs ~27% in FY2020.
                        </div>
                        <p><strong>What to watch:</strong></p>
                        <ul>
                            <li><strong>Blackwell ramp:</strong> H200 and GB200 driving sequential growth through FY2026</li>
                            <li><strong>Customer concentration:</strong> 4 hyperscalers = 61% of revenue - single point of failure risk</li>
                            <li><strong>Custom silicon competition:</strong> Google TPU, Amazon Trainium projected 45% market share by 2028</li>
                            <li><strong>Sovereign AI:</strong> Enterprise and government deployments provide diversification</li>
                            <li><strong>Export controls:</strong> China restrictions limit TAM by ~13%</li>
                        </ul>
                    `
                }
            };

            const desc = descriptions[key];
            if (!desc) return;

            document.getElementById('modalTitle').textContent = desc.title;
            document.getElementById('modalBody').innerHTML = desc.content;
            document.getElementById('modalOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event && event.target.id !== 'modalOverlay') return;
            document.getElementById('modalOverlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        function toggleOverview() {
            const btn = document.querySelector('.overview-toggle');
            const content = document.getElementById('overviewContent');
            btn.classList.toggle('active');
            content.classList.toggle('active');
        }

        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

        // DCF Functions
        let currentScenario = 'base';

        function initDCF() {
            document.getElementById('dcfCurrent').textContent = '$' + dcfData.current_price.toFixed(0);

            const base = dcfData.assumptions.base;
            document.getElementById('growthSlider').value = dcfData.historical_growth.selected_growth_rate;
            document.getElementById('waccSlider').value = base.wacc;
            document.getElementById('terminalSlider').value = base.terminal_growth;

            document.getElementById('growthValue').textContent = dcfData.historical_growth.selected_growth_rate.toFixed(1) + '%';
            document.getElementById('waccValue').textContent = base.wacc + '%';
            document.getElementById('terminalValue').textContent = base.terminal_growth + '%';

            document.getElementById('growthHint').textContent =
                'Based on ' + dcfData.historical_growth.growth_rate_source.replace(/_/g, ' ');

            renderDCFInputs();
            renderHistoricalGrowth();
            renderSensitivityMatrix();
            updateDCFDisplay();
            switchScenario('base');
        }

        function renderDCFInputs() {
            const inputs = dcfData.inputs;
            const formatNum = (n) => {
                if (Math.abs(n) >= 1000) return '$' + (n/1000).toFixed(1) + 'B';
                return '$' + n.toFixed(0) + 'M';
            };

            document.getElementById('baseFCF').textContent = formatNum(inputs.last_fcf);
            document.getElementById('sharesOut').textContent = (inputs.shares_outstanding/1000).toFixed(1) + 'B';

            const netDebt = inputs.net_debt;
            const netDebtEl = document.getElementById('netDebt');
            netDebtEl.textContent = formatNum(Math.abs(netDebt));
            if (netDebt < 0) netDebtEl.style.color = '#76b900';

            renderFCFProjections();
        }

        function renderFCFProjections() {
            const startGrowth = parseFloat(document.getElementById('growthSlider')?.value || dcfData.historical_growth.selected_growth_rate);
            const baseFCF = dcfData.inputs.last_fcf;

            const formatFCF = (n) => {
                if (Math.abs(n) >= 1000) return '$' + (n/1000).toFixed(1) + 'B';
                return '$' + n.toFixed(0) + 'M';
            };

            const endGrowth = 10;
            const growthRates = [];
            for (let i = 0; i < 5; i++) {
                const rate = startGrowth > endGrowth
                    ? startGrowth - (startGrowth - endGrowth) * (i / 4)
                    : startGrowth;
                growthRates.push(rate);
            }

            let fcf = baseFCF;
            const fcfValues = [baseFCF];

            for (let i = 0; i < 5; i++) {
                fcf = fcf * (1 + growthRates[i] / 100);
                fcfValues.push(fcf);
            }

            let html = `
                <div class="fcf-projection-item header">Base</div>
                <div class="fcf-projection-item header">Year 1</div>
                <div class="fcf-projection-item header">Year 2</div>
                <div class="fcf-projection-item header">Year 3</div>
                <div class="fcf-projection-item header">Year 4</div>
                <div class="fcf-projection-item header">Year 5</div>
            `;

            html += `<div class="fcf-projection-item">
                <div class="fcf-value">${formatFCF(fcfValues[0])}</div>
                <div class="growth-rate">-</div>
            </div>`;

            for (let i = 1; i <= 5; i++) {
                html += `<div class="fcf-projection-item">
                    <div class="fcf-value">${formatFCF(fcfValues[i])}</div>
                    <div class="growth-rate">+${growthRates[i-1].toFixed(0)}%</div>
                </div>`;
            }

            document.getElementById('fcfProjectionTable').innerHTML = html;
        }

        function calculateDCF(startGrowth, wacc, terminalGrowth) {
            const years = 5;
            const fcf = dcfData.inputs.last_fcf;
            let pvFCF = 0;
            let projectedFCF = fcf;

            const endGrowth = 10;

            for (let i = 0; i < years; i++) {
                const yearGrowth = startGrowth > endGrowth
                    ? startGrowth - (startGrowth - endGrowth) * (i / 4)
                    : startGrowth;
                projectedFCF *= (1 + yearGrowth / 100);
                pvFCF += projectedFCF / Math.pow(1 + wacc/100, i + 1);
            }

            const terminalFCF = projectedFCF * (1 + terminalGrowth/100);
            const terminalValue = terminalFCF / (wacc/100 - terminalGrowth/100);
            const pvTerminal = terminalValue / Math.pow(1 + wacc/100, years);

            const enterpriseValue = pvFCF + pvTerminal;
            const equityValue = enterpriseValue - dcfData.inputs.net_debt;
            const iv = equityValue / dcfData.inputs.shares_outstanding;

            const terminalPerShare = terminalValue / dcfData.inputs.shares_outstanding;
            const entryPrice = terminalPerShare / Math.pow(1.15, years);

            return {
                iv: iv,
                entryPrice: entryPrice,
                terminalPerShare: terminalPerShare,
                pvFCF: pvFCF,
                pvTerminal: pvTerminal,
                enterpriseValue: enterpriseValue
            };
        }

        window.updateDCFDisplay = function() {
            const growth = parseFloat(document.getElementById('growthSlider').value);
            const wacc = parseFloat(document.getElementById('waccSlider').value);
            const terminal = parseFloat(document.getElementById('terminalSlider').value);

            document.getElementById('growthValue').textContent = growth.toFixed(1) + '%';
            document.getElementById('waccValue').textContent = wacc + '%';
            document.getElementById('terminalValue').textContent = terminal + '%';

            renderFCFProjections();

            const result = calculateDCF(growth, wacc, terminal);

            document.getElementById('dcfIV').textContent = '$' + result.iv.toFixed(0);
            document.getElementById('dcfEntry').textContent = '$' + result.entryPrice.toFixed(0);

            const upside = ((result.iv - dcfData.current_price) / dcfData.current_price * 100);
            const upsideEl = document.getElementById('dcfUpside');
            upsideEl.textContent = (upside >= 0 ? '+' : '') + upside.toFixed(0) + '% ' + (upside >= 0 ? 'upside' : 'downside');
            upsideEl.className = 'dcf-change ' + (upside >= 0 ? 'positive' : 'negative');

            document.getElementById('dcfWeighted').textContent = '$' + dcfData.probability_weighted.weighted_iv.toFixed(0);

            const grid = document.getElementById('assumptionGrid');
            if (grid) {
                grid.innerHTML = `
                    <div class="assumption-item">
                        <div class="label">Growth Rate</div>
                        <div class="value">${growth.toFixed(1)}%</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">WACC</div>
                        <div class="value">${wacc}%</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">Terminal Growth</div>
                        <div class="value">${terminal}%</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">Intrinsic Value</div>
                        <div class="value" style="color: #76b900;">$${result.iv.toFixed(0)}</div>
                    </div>
                    <div class="assumption-item">
                        <div class="label">Entry Price</div>
                        <div class="value" style="color: #76b900;">$${result.entryPrice.toFixed(0)}</div>
                    </div>
                `;
            }
        };

        window.switchScenario = function(scenario) {
            currentScenario = scenario;

            document.querySelectorAll('.scenario-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.scenario === scenario);
            });

            const assumptions = dcfData.assumptions[scenario];
            const valuation = dcfData.valuation[scenario];

            renderFCFProjections();

            document.getElementById('growthSlider').value = assumptions.growth_rates[0];
            document.getElementById('waccSlider').value = assumptions.wacc;
            document.getElementById('terminalSlider').value = assumptions.terminal_growth;

            const grid = document.getElementById('assumptionGrid');
            grid.innerHTML = `
                <div class="assumption-item">
                    <div class="label">Year 1 Growth</div>
                    <div class="value">${assumptions.growth_rates[0]}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Year 5 Growth</div>
                    <div class="value">${assumptions.growth_rates[4]}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">FCF Margin</div>
                    <div class="value">${assumptions.fcf_margin}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">WACC</div>
                    <div class="value">${assumptions.wacc}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Terminal Growth</div>
                    <div class="value">${assumptions.terminal_growth}%</div>
                </div>
                <div class="assumption-item">
                    <div class="label">Intrinsic Value</div>
                    <div class="value" style="color: #76b900;">$${valuation.intrinsic_value.toFixed(0)}</div>
                </div>
            `;

            updateDCFDisplay();
        };

        function renderHistoricalGrowth() {
            const growth = dcfData.historical_growth;
            const selectedSource = growth.growth_rate_source;
            const grid = document.getElementById('growthGrid');

            const metrics = [
                { key: 'revenue_3yr_cagr', label: 'Revenue 3Y' },
                { key: 'revenue_5yr_cagr', label: 'Revenue 5Y' },
                { key: 'eps_3yr_cagr', label: 'EPS 3Y' },
                { key: 'eps_5yr_cagr', label: 'EPS 5Y' },
                { key: 'equity_3yr_cagr', label: 'Equity 3Y' },
                { key: 'equity_5yr_cagr', label: 'Equity 5Y' },
                { key: 'fcf_3yr_cagr', label: 'FCF 3Y' },
                { key: 'fcf_5yr_cagr', label: 'FCF 5Y' }
            ];

            grid.innerHTML = metrics.map(m => {
                const rate = growth[m.key];
                const isSelected = m.key === selectedSource;
                const colorClass = rate >= 0 ? 'positive' : 'negative';
                return `
                    <div class="growth-item ${isSelected ? 'selected' : ''}">
                        <div class="metric">${m.label}</div>
                        <div class="rate ${colorClass}">${rate >= 0 ? '+' : ''}${rate.toFixed(1)}%</div>
                    </div>
                `;
            }).join('');
        }

        function renderSensitivityMatrix() {
            const sens = dcfData.sensitivity;
            const table = document.getElementById('sensitivityMatrix');
            const currentPrice = dcfData.current_price;

            let html = '<tr><th>WACC \\ Term G</th>';
            sens.terminal_growth_range.forEach(tg => {
                html += `<th>${tg}%</th>`;
            });
            html += '</tr>';

            sens.wacc_range.forEach((wacc, i) => {
                html += `<tr><th>${wacc}%</th>`;
                sens.matrix[i].forEach((val, j) => {
                    const isHighlight = wacc === dcfData.assumptions.base.wacc &&
                                       sens.terminal_growth_range[j] === dcfData.assumptions.base.terminal_growth;
                    const colorClass = val >= currentPrice ? 'above-current' : 'below-current';
                    html += `<td class="${isHighlight ? 'highlight' : colorClass}">$${val}</td>`;
                });
                html += '</tr>';
            });

            table.innerHTML = html;
        }

        // Initialize dashboard
        renderKPIs();
        renderGuidance();
        initDCF();

        // Bind slider events
        (function() {
            var growthSlider = document.getElementById('growthSlider');
            var waccSlider = document.getElementById('waccSlider');
            var terminalSlider = document.getElementById('terminalSlider');

            if (growthSlider) {
                growthSlider.oninput = window.updateDCFDisplay;
                growthSlider.onchange = window.updateDCFDisplay;
            }
            if (waccSlider) {
                waccSlider.oninput = window.updateDCFDisplay;
                waccSlider.onchange = window.updateDCFDisplay;
            }
            if (terminalSlider) {
                terminalSlider.oninput = window.updateDCFDisplay;
                terminalSlider.onchange = window.updateDCFDisplay;
            }
        })();
    </script>
</body>
</html>